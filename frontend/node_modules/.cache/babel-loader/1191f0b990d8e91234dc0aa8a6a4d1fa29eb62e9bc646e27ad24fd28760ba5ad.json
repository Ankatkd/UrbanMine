{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ankao\\\\OneDrive\\\\Desktop\\\\nilesh\\\\E-waste\\\\frontend\\\\src\\\\pages\\\\WorkerDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getTodaysPendingPickupsForWorker, assignPickupToWorker, updatePickupStatus, getClosestUnassignedPickup,\n// NEW: Import the new API call\ngetWorkerPickupHistory,\n// Renamed from getAllWorkerPickups for clarity\ngetAllWorkerActivityLogs // NEW: For fetching all logs\n} from '../services/workerApi';\nimport '../assets/css/Pickup.css'; // Assuming this CSS is for pickup card styling\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst WorkerDashboard = () => {\n  _s();\n  const [todaysPickups, setTodaysPickups] = useState([]);\n  const [closestUnassignedPickup, setClosestUnassignedPickup] = useState(null); // NEW state\n  const [workerPickupHistory, setWorkerPickupHistory] = useState([]); // State for all assigned pickups\n  const [workerActivityLogs, setWorkerActivityLogs] = useState([]); // State for all activity logs\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchWorkerData = async () => {\n      try {\n        // Fetch today's assigned pickups\n        const todaysRes = await getTodaysPendingPickupsForWorker();\n        setTodaysPickups(todaysRes.data);\n\n        // Fetch the single closest unassigned pickup\n        const closestRes = await getClosestUnassignedPickup();\n        setClosestUnassignedPickup(closestRes.data);\n\n        // Fetch all assigned pickups (history)\n        const historyRes = await getWorkerPickupHistory();\n        setWorkerPickupHistory(historyRes.data);\n\n        // Fetch all worker activity logs\n        const logsRes = await getAllWorkerActivityLogs();\n        setWorkerActivityLogs(logsRes.data);\n      } catch (err) {\n        if (err.response && err.response.status === 404 && err.config.url.includes('unassigned/closest')) {\n          // This is expected if no closest pickup is found\n          console.log(\"No closest unassigned pickup found.\");\n          setClosestUnassignedPickup(null);\n        } else {\n          setError('Failed to fetch worker dashboard data.');\n          console.error(err);\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchWorkerData();\n  }, []);\n  const handleAssignToMe = async pickupId => {\n    try {\n      await assignPickupToWorker(pickupId);\n      alert('Pickup assigned successfully!');\n      // Refresh data after assignment\n      setLoading(true);\n      setError(null);\n      const todaysRes = await getTodaysPendingPickupsForWorker();\n      setTodaysPickups(todaysRes.data);\n      const closestRes = await getClosestUnassignedPickup(); // Re-fetch closest\n      setClosestUnassignedPickup(closestRes.data);\n      const historyRes = await getWorkerPickupHistory();\n      setWorkerPickupHistory(historyRes.data);\n      setLoading(false);\n    } catch (err) {\n      console.error('Failed to assign pickup:', err);\n      if (err.response && err.response.status === 409) {\n        alert('Failed to assign pickup: This pickup is already assigned or in a conflicting state.');\n      } else {\n        alert('Failed to assign pickup. Please try again.');\n      }\n    }\n  };\n  const handleUpdateStatus = async (pickupId, currentStatus, newStatus, collectedKgs, notes) => {\n    if (!['COMPLETED', 'CANCELLED'].includes(newStatus)) {\n      alert('Invalid status. Only \"COMPLETED\" or \"CANCELLED\" are allowed for direct update here.');\n      return;\n    }\n    try {\n      const confirmed = window.confirm(`Are you sure you want to set this pickup to ${newStatus}?`);\n      if (!confirmed) return;\n      const updateData = {\n        status: newStatus,\n        collectedKgs: newStatus === 'COMPLETED' ? collectedKgs : null,\n        notes: notes\n      };\n      await updatePickupStatus(pickupId, updateData);\n      alert(`Pickup status updated to ${newStatus}!`);\n\n      // Refresh data\n      setLoading(true);\n      setError(null);\n      const todaysRes = await getTodaysPendingPickupsForWorker();\n      setTodaysPickups(todaysRes.data);\n      const historyRes = await getWorkerPickupHistory();\n      setWorkerPickupHistory(historyRes.data);\n      const logsRes = await getAllWorkerActivityLogs();\n      setWorkerActivityLogs(logsRes.data);\n      setLoading(false);\n    } catch (err) {\n      console.error('Failed to update pickup status:', err);\n      alert('Failed to update pickup status. Please try again.');\n    }\n  };\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('userRole'); // Clear user role too\n    navigate('/');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-5\",\n      children: \"Loading dashboard...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 16\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-5 text-danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5 mb-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-4 text-center\",\n      children: \"Worker Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"mb-3\",\n      children: \"Closest Unassigned Pickup for You\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this), closestUnassignedPickup ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mb-4 pickup-card\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: [\"Pickup Request from \", closestUnassignedPickup.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Address:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 29\n          }, this), \" \", closestUnassignedPickup.address, \", \", closestUnassignedPickup.city, \", \", closestUnassignedPickup.pincode]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }, this), \" \", closestUnassignedPickup.date, \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 83\n          }, this), \" \", closestUnassignedPickup.time]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 29\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `status-badge status-${closestUnassignedPickup.status.toLowerCase().replace(/\\s/g, '-')}`,\n            children: closestUnassignedPickup.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 54\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => handleAssignToMe(closestUnassignedPickup.id),\n          disabled: closestUnassignedPickup.assignedWorkerId !== null // Disable if already assigned\n          ,\n          children: closestUnassignedPickup.assignedWorkerId ? 'Already Assigned' : 'Assign to Me'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: \"No closest unassigned pickups found for your location at the moment.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"my-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"mb-3\",\n      children: \"Today's Assigned Pickups (Pending/Assigned)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }, this), todaysPickups.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: \"No assigned pickups for today.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: todaysPickups.map(pickup => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 col-lg-4 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card h-100 pickup-card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title\",\n              children: [\"Pickup from \", pickup.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Address:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 41\n              }, this), \" \", pickup.address, \", \", pickup.city, \", \", pickup.pincode]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Date:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 41\n              }, this), \" \", pickup.date, \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Time:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 78\n              }, this), \" \", pickup.time]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 41\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `status-badge status-${pickup.status.toLowerCase().replace(/\\s/g, '-')}`,\n                children: pickup.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 66\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 37\n            }, this), pickup.status === 'ASSIGNED' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success me-2 mb-2\",\n                onClick: () => {\n                  const collectedKgs = prompt('Enter collected weight in KGs (e.g., 5.5):');\n                  if (collectedKgs !== null) {\n                    const notes = prompt('Add any notes for completion:');\n                    handleUpdateStatus(pickup.id, pickup.status, 'COMPLETED', parseFloat(collectedKgs), notes);\n                  }\n                },\n                children: \"Mark Completed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-danger mb-2\",\n                onClick: () => {\n                  const notes = prompt('Add any notes for cancellation:');\n                  handleUpdateStatus(pickup.id, pickup.status, 'CANCELLED', null, notes);\n                },\n                children: \"Mark Cancelled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 29\n        }, this)\n      }, pickup.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"my-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"mb-3\",\n      children: \"All My Assigned Pickups (History)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }, this), workerPickupHistory.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: \"No assigned pickup requests yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: workerPickupHistory.map(pickup => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 col-lg-4 mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card h-100 pickup-card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title\",\n              children: [\"Pickup from \", pickup.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Address:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 41\n              }, this), \" \", pickup.address, \", \", pickup.city, \", \", pickup.pincode]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Date:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 41\n              }, this), \" \", pickup.date, \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Time:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 78\n              }, this), \" \", pickup.time]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 41\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `status-badge status-${pickup.status.toLowerCase().replace(/\\s/g, '-')}`,\n                children: pickup.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 66\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 37\n            }, this), pickup.weightKg && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Collected:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 45\n              }, this), \" \", pickup.weightKg, \" Kgs\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 29\n        }, this)\n      }, pickup.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"my-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"mb-3\",\n      children: \"My Activity Logs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }, this), workerActivityLogs.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted\",\n      children: \"No activity logs recorded yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list-group\",\n      children: workerActivityLogs.map(log => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list-group-item list-group-item-action flex-column align-items-start mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex w-100 justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"mb-1\",\n            children: [\"Pickup Request ID: \", log.pickupRequest.id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: new Date(log.timestamp).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mb-1\",\n          children: [\"Status changed from \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: log.oldStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 53\n          }, this), \" to \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: log.newStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 89\n          }, this), \".\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 29\n        }, this), log.weightKg && /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"d-block\",\n          children: [\"Collected Weight: \", log.weightKg, \" Kgs\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 46\n        }, this), log.notes && /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"d-block\",\n          children: [\"Notes: \", log.notes]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 43\n        }, this)]\n      }, log.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-danger\",\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 9\n  }, this);\n};\n_s(WorkerDashboard, \"E59NSx4ji6r04TYPC7igMhG3GL4=\", false, function () {\n  return [useNavigate];\n});\n_c = WorkerDashboard;\nexport default WorkerDashboard;\nvar _c;\n$RefreshReg$(_c, \"WorkerDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","getTodaysPendingPickupsForWorker","assignPickupToWorker","updatePickupStatus","getClosestUnassignedPickup","getWorkerPickupHistory","getAllWorkerActivityLogs","jsxDEV","_jsxDEV","Fragment","_Fragment","WorkerDashboard","_s","todaysPickups","setTodaysPickups","closestUnassignedPickup","setClosestUnassignedPickup","workerPickupHistory","setWorkerPickupHistory","workerActivityLogs","setWorkerActivityLogs","loading","setLoading","error","setError","navigate","fetchWorkerData","todaysRes","data","closestRes","historyRes","logsRes","err","response","status","config","url","includes","console","log","handleAssignToMe","pickupId","alert","handleUpdateStatus","currentStatus","newStatus","collectedKgs","notes","confirmed","window","confirm","updateData","handleLogout","localStorage","removeItem","className","children","fileName","_jsxFileName","lineNumber","columnNumber","username","address","city","pincode","date","time","toLowerCase","replace","onClick","id","disabled","assignedWorkerId","length","map","pickup","prompt","parseFloat","weightKg","pickupRequest","Date","timestamp","toLocaleString","oldStatus","_c","$RefreshReg$"],"sources":["C:/Users/ankao/OneDrive/Desktop/nilesh/E-waste/frontend/src/pages/WorkerDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    getTodaysPendingPickupsForWorker,\r\n    assignPickupToWorker,\r\n    updatePickupStatus,\r\n    getClosestUnassignedPickup, // NEW: Import the new API call\r\n    getWorkerPickupHistory, // Renamed from getAllWorkerPickups for clarity\r\n    getAllWorkerActivityLogs // NEW: For fetching all logs\r\n} from '../services/workerApi';\r\nimport '../assets/css/Pickup.css'; // Assuming this CSS is for pickup card styling\r\n\r\nconst WorkerDashboard = () => {\r\n    const [todaysPickups, setTodaysPickups] = useState([]);\r\n    const [closestUnassignedPickup, setClosestUnassignedPickup] = useState(null); // NEW state\r\n    const [workerPickupHistory, setWorkerPickupHistory] = useState([]); // State for all assigned pickups\r\n    const [workerActivityLogs, setWorkerActivityLogs] = useState([]); // State for all activity logs\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchWorkerData = async () => {\r\n            try {\r\n                // Fetch today's assigned pickups\r\n                const todaysRes = await getTodaysPendingPickupsForWorker();\r\n                setTodaysPickups(todaysRes.data);\r\n\r\n                // Fetch the single closest unassigned pickup\r\n                const closestRes = await getClosestUnassignedPickup();\r\n                setClosestUnassignedPickup(closestRes.data);\r\n                \r\n                // Fetch all assigned pickups (history)\r\n                const historyRes = await getWorkerPickupHistory();\r\n                setWorkerPickupHistory(historyRes.data);\r\n\r\n                // Fetch all worker activity logs\r\n                const logsRes = await getAllWorkerActivityLogs();\r\n                setWorkerActivityLogs(logsRes.data);\r\n\r\n\r\n            } catch (err) {\r\n                if (err.response && err.response.status === 404 && err.config.url.includes('unassigned/closest')) {\r\n                    // This is expected if no closest pickup is found\r\n                    console.log(\"No closest unassigned pickup found.\");\r\n                    setClosestUnassignedPickup(null);\r\n                } else {\r\n                    setError('Failed to fetch worker dashboard data.');\r\n                    console.error(err);\r\n                }\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchWorkerData();\r\n    }, []);\r\n\r\n    const handleAssignToMe = async (pickupId) => {\r\n        try {\r\n            await assignPickupToWorker(pickupId);\r\n            alert('Pickup assigned successfully!');\r\n            // Refresh data after assignment\r\n            setLoading(true);\r\n            setError(null);\r\n            const todaysRes = await getTodaysPendingPickupsForWorker();\r\n            setTodaysPickups(todaysRes.data);\r\n            const closestRes = await getClosestUnassignedPickup(); // Re-fetch closest\r\n            setClosestUnassignedPickup(closestRes.data);\r\n            const historyRes = await getWorkerPickupHistory();\r\n            setWorkerPickupHistory(historyRes.data);\r\n            setLoading(false);\r\n        } catch (err) {\r\n            console.error('Failed to assign pickup:', err);\r\n            if (err.response && err.response.status === 409) {\r\n                alert('Failed to assign pickup: This pickup is already assigned or in a conflicting state.');\r\n            } else {\r\n                alert('Failed to assign pickup. Please try again.');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleUpdateStatus = async (pickupId, currentStatus, newStatus, collectedKgs, notes) => {\r\n        if (!['COMPLETED', 'CANCELLED'].includes(newStatus)) {\r\n            alert('Invalid status. Only \"COMPLETED\" or \"CANCELLED\" are allowed for direct update here.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const confirmed = window.confirm(`Are you sure you want to set this pickup to ${newStatus}?`);\r\n            if (!confirmed) return;\r\n\r\n            const updateData = {\r\n                status: newStatus,\r\n                collectedKgs: newStatus === 'COMPLETED' ? collectedKgs : null,\r\n                notes: notes\r\n            };\r\n            await updatePickupStatus(pickupId, updateData);\r\n            alert(`Pickup status updated to ${newStatus}!`);\r\n\r\n            // Refresh data\r\n            setLoading(true);\r\n            setError(null);\r\n            const todaysRes = await getTodaysPendingPickupsForWorker();\r\n            setTodaysPickups(todaysRes.data);\r\n            const historyRes = await getWorkerPickupHistory();\r\n            setWorkerPickupHistory(historyRes.data);\r\n            const logsRes = await getAllWorkerActivityLogs();\r\n            setWorkerActivityLogs(logsRes.data);\r\n            setLoading(false);\r\n\r\n        } catch (err) {\r\n            console.error('Failed to update pickup status:', err);\r\n            alert('Failed to update pickup status. Please try again.');\r\n        }\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('userRole'); // Clear user role too\r\n        navigate('/');\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"container mt-5\">Loading dashboard...</div>;\r\n    }\r\n\r\n    if (error) {\r\n        return <div className=\"container mt-5 text-danger\">{error}</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mt-5 mb-5\">\r\n            <h2 className=\"mb-4 text-center\">Worker Dashboard</h2>\r\n\r\n            {/* NEW: Closest Unassigned Pickup Section */}\r\n            <h3 className=\"mb-3\">Closest Unassigned Pickup for You</h3>\r\n            {closestUnassignedPickup ? (\r\n                <div className=\"card mb-4 pickup-card\">\r\n                    <div className=\"card-body\">\r\n                        <h5 className=\"card-title\">Pickup Request from {closestUnassignedPickup.username}</h5>\r\n                        <p className=\"card-text\">\r\n                            <strong>Address:</strong> {closestUnassignedPickup.address}, {closestUnassignedPickup.city}, {closestUnassignedPickup.pincode}\r\n                        </p>\r\n                        <p className=\"card-text\">\r\n                            <strong>Date:</strong> {closestUnassignedPickup.date} <strong>Time:</strong> {closestUnassignedPickup.time}\r\n                        </p>\r\n                        <p className=\"card-text\">\r\n                            <strong>Status:</strong> <span className={`status-badge status-${closestUnassignedPickup.status.toLowerCase().replace(/\\s/g, '-')}`}>{closestUnassignedPickup.status}</span>\r\n                        </p>\r\n                        <button\r\n                            className=\"btn btn-primary\"\r\n                            onClick={() => handleAssignToMe(closestUnassignedPickup.id)}\r\n                            disabled={closestUnassignedPickup.assignedWorkerId !== null} // Disable if already assigned\r\n                        >\r\n                            {closestUnassignedPickup.assignedWorkerId ? 'Already Assigned' : 'Assign to Me'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <p className=\"text-muted\">No closest unassigned pickups found for your location at the moment.</p>\r\n            )}\r\n\r\n            <hr className=\"my-5\" /> {/* Separator */}\r\n\r\n            {/* Today's Assigned Pickups */}\r\n            <h3 className=\"mb-3\">Today's Assigned Pickups (Pending/Assigned)</h3>\r\n            {todaysPickups.length === 0 ? (\r\n                <p className=\"text-muted\">No assigned pickups for today.</p>\r\n            ) : (\r\n                <div className=\"row\">\r\n                    {todaysPickups.map((pickup) => (\r\n                        <div key={pickup.id} className=\"col-md-6 col-lg-4 mb-4\">\r\n                            <div className=\"card h-100 pickup-card\">\r\n                                <div className=\"card-body\">\r\n                                    <h5 className=\"card-title\">Pickup from {pickup.username}</h5>\r\n                                    <p className=\"card-text\">\r\n                                        <strong>Address:</strong> {pickup.address}, {pickup.city}, {pickup.pincode}\r\n                                    </p>\r\n                                    <p className=\"card-text\">\r\n                                        <strong>Date:</strong> {pickup.date} <strong>Time:</strong> {pickup.time}\r\n                                    </p>\r\n                                    <p className=\"card-text\">\r\n                                        <strong>Status:</strong> <span className={`status-badge status-${pickup.status.toLowerCase().replace(/\\s/g, '-')}`}>{pickup.status}</span>\r\n                                    </p>\r\n                                    {pickup.status === 'ASSIGNED' && (\r\n                                        <>\r\n                                            <button\r\n                                                className=\"btn btn-success me-2 mb-2\"\r\n                                                onClick={() => {\r\n                                                    const collectedKgs = prompt('Enter collected weight in KGs (e.g., 5.5):');\r\n                                                    if (collectedKgs !== null) {\r\n                                                        const notes = prompt('Add any notes for completion:');\r\n                                                        handleUpdateStatus(pickup.id, pickup.status, 'COMPLETED', parseFloat(collectedKgs), notes);\r\n                                                    }\r\n                                                }}\r\n                                            >\r\n                                                Mark Completed\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"btn btn-danger mb-2\"\r\n                                                onClick={() => {\r\n                                                    const notes = prompt('Add any notes for cancellation:');\r\n                                                    handleUpdateStatus(pickup.id, pickup.status, 'CANCELLED', null, notes);\r\n                                                }}\r\n                                            >\r\n                                                Mark Cancelled\r\n                                            </button>\r\n                                        </>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            <hr className=\"my-5\" />\r\n\r\n            {/* All My Assigned Pickups (History) */}\r\n            <h3 className=\"mb-3\">All My Assigned Pickups (History)</h3>\r\n            {workerPickupHistory.length === 0 ? (\r\n                <p className=\"text-muted\">No assigned pickup requests yet.</p>\r\n            ) : (\r\n                <div className=\"row\">\r\n                    {workerPickupHistory.map((pickup) => (\r\n                        <div key={pickup.id} className=\"col-md-6 col-lg-4 mb-4\">\r\n                            <div className=\"card h-100 pickup-card\">\r\n                                <div className=\"card-body\">\r\n                                    <h5 className=\"card-title\">Pickup from {pickup.username}</h5>\r\n                                    <p className=\"card-text\">\r\n                                        <strong>Address:</strong> {pickup.address}, {pickup.city}, {pickup.pincode}\r\n                                    </p>\r\n                                    <p className=\"card-text\">\r\n                                        <strong>Date:</strong> {pickup.date} <strong>Time:</strong> {pickup.time}\r\n                                    </p>\r\n                                    <p className=\"card-text\">\r\n                                        <strong>Status:</strong> <span className={`status-badge status-${pickup.status.toLowerCase().replace(/\\s/g, '-')}`}>{pickup.status}</span>\r\n                                    </p>\r\n                                    {pickup.weightKg && (\r\n                                        <p className=\"card-text\">\r\n                                            <strong>Collected:</strong> {pickup.weightKg} Kgs\r\n                                        </p>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            <hr className=\"my-5\" />\r\n\r\n            {/* My Activity Logs */}\r\n            <h3 className=\"mb-3\">My Activity Logs</h3>\r\n            {workerActivityLogs.length === 0 ? (\r\n                <p className=\"text-muted\">No activity logs recorded yet.</p>\r\n            ) : (\r\n                <div className=\"list-group\">\r\n                    {workerActivityLogs.map((log) => (\r\n                        <div key={log.id} className=\"list-group-item list-group-item-action flex-column align-items-start mb-2\">\r\n                            <div className=\"d-flex w-100 justify-content-between\">\r\n                                <h5 className=\"mb-1\">Pickup Request ID: {log.pickupRequest.id}</h5>\r\n                                <small>{new Date(log.timestamp).toLocaleString()}</small>\r\n                            </div>\r\n                            <p className=\"mb-1\">\r\n                                Status changed from <strong>{log.oldStatus}</strong> to <strong>{log.newStatus}</strong>.\r\n                            </p>\r\n                            {log.weightKg && <small className=\"d-block\">Collected Weight: {log.weightKg} Kgs</small>}\r\n                            {log.notes && <small className=\"d-block\">Notes: {log.notes}</small>}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"text-center mt-5\">\r\n                <button className=\"btn btn-danger\" onClick={handleLogout}>\r\n                    Logout\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default WorkerDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}