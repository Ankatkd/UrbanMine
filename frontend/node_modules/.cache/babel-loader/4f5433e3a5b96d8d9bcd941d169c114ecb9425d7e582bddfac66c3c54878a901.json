{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ankao\\\\OneDrive\\\\Desktop\\\\nilesh\\\\E-waste\\\\frontend\\\\src\\\\pages\\\\WorkerDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getWorkerProfile, getWorkerPickupRequests, getTodaysPendingPickups, updatePickupRequestStatus, getAllWorkerPickupLogs, getUnassignedPickups,\n// Now correctly imported from workerApi\nassignPickup // Now correctly imported from workerApi\n} from '../services/workerApi';\nimport moment from 'moment'; // Assuming you have moment.js installed for date formatting\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst WorkerDashboard = () => {\n  _s();\n  const navigate = useNavigate();\n  const [workerProfile, setWorkerProfile] = useState(null);\n  const [assignedPickups, setAssignedPickups] = useState([]);\n  const [todaysPendingPickups, setTodaysPendingPickups] = useState([]);\n  const [unassignedPickups, setUnassignedPickups] = useState([]); // State for unassigned pickups\n  const [pickupLogs, setPickupLogs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showUnassignedModal, setShowUnassignedModal] = useState(false); // State for modal visibility\n\n  // Function to fetch all dashboard data\n  const fetchDashboardData = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const profile = await getWorkerProfile();\n      setWorkerProfile(profile);\n      const assigned = await getWorkerPickupRequests();\n      setAssignedPickups(assigned);\n      const pendingToday = await getTodaysPendingPickups();\n      setTodaysPendingPickups(pendingToday);\n      const logs = await getAllWorkerPickupLogs();\n      setPickupLogs(logs);\n\n      // Fetch unassigned pickups when dashboard data is loaded\n      const unassigned = await getUnassignedPickups();\n      setUnassignedPickups(unassigned);\n    } catch (err) {\n      console.error(\"Error fetching worker dashboard data:\", err);\n      setError(\"Failed to load dashboard data. Please try again.\");\n      if (err.message && err.message.includes(\"Authentication expired\") || err.status === 401) {\n        // If 401, redirect to login\n        navigate('/worker/login');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [navigate]); // navigate is a stable dependency from useNavigate\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, [fetchDashboardData]); // fetchDashboardData is now a stable dependency due to useCallback\n\n  const handleUpdateStatus = async (requestId, newStatus, collectedKgs, notes) => {\n    try {\n      // collectedKgs and notes are only relevant for 'COMPLETED' status\n      const statusData = {\n        status: newStatus\n      };\n      if (newStatus === 'COMPLETED') {\n        statusData.collectedKgs = parseFloat(collectedKgs); // Ensure it's a number\n        statusData.notes = notes;\n      }\n      await updatePickupRequestStatus(requestId, statusData);\n      alert(`Pickup request ${requestId} status updated to ${newStatus}.`);\n      // Re-fetch data to reflect the changes\n      fetchDashboardData();\n    } catch (err) {\n      console.error(\"Error updating pickup status:\", err);\n      setError(`Failed to update status for request ${requestId}.`);\n    }\n  };\n  const handleAssignPickup = async pickupId => {\n    try {\n      await assignPickup(pickupId);\n      alert(`Pickup request ${pickupId} assigned to you successfully!`);\n      // Re-fetch data to update both unassigned and assigned lists\n      fetchDashboardData();\n      setShowUnassignedModal(false); // Close modal after assignment\n    } catch (err) {\n      console.error(\"Error assigning pickup:\", err);\n      setError(`Failed to assign pickup ${pickupId}.`);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-4\",\n      children: \"Loading dashboard...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 16\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-500 text-center p-4\",\n      children: [\"Error: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold mb-6 text-green-700\",\n      children: \"Worker Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), workerProfile && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow rounded-lg p-6 mb-8 border border-green-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-semibold mb-4 text-green-600\",\n        children: [\"Welcome, \", workerProfile.username, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700\",\n        children: [\"Email: \", workerProfile.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700\",\n        children: [\"Phone: \", workerProfile.phoneNumber]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow rounded-lg p-6 border border-yellow-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold mb-4 text-yellow-700\",\n          children: [\"Today's Pending Pickups (\", todaysPendingPickups.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), todaysPendingPickups.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-3\",\n          children: todaysPendingPickups.map(pickup => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"bg-yellow-50 p-3 rounded-md border border-yellow-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-medium\",\n              children: [\"Request ID: \", pickup._id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Location: \", pickup.address]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Time Slot: \", pickup.timeSlot]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-yellow-800\",\n                children: pickup.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 82\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 space-x-2\",\n              children: pickup.status === 'PENDING' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleUpdateStatus(pickup._id, 'COMPLETED', prompt(\"Enter collected KGs:\"), prompt(\"Enter notes:\")),\n                  className: \"bg-green-500 hover:bg-green-600 text-white text-xs px-3 py-1 rounded\",\n                  children: \"Mark Completed\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleUpdateStatus(pickup._id, 'CANCELED', null, prompt(\"Enter cancellation reason:\")),\n                  className: \"bg-red-500 hover:bg-red-600 text-white text-xs px-3 py-1 rounded\",\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 37\n            }, this)]\n          }, pickup._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No pending pickups for today.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow rounded-lg p-6 border border-blue-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold mb-4 text-blue-700\",\n          children: [\"All Your Assigned Pickups (\", assignedPickups.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this), assignedPickups.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-3\",\n          children: assignedPickups.map(pickup => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"bg-blue-50 p-3 rounded-md border border-blue-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-medium\",\n              children: [\"Request ID: \", pickup._id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Location: \", pickup.address]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Scheduled: \", moment(pickup.pickupDate).format('YYYY-MM-DD'), \" at \", pickup.timeSlot]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `font-semibold ${pickup.status === 'PENDING' ? 'text-yellow-800' : 'text-green-800'}`,\n                children: pickup.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 82\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 37\n            }, this)]\n          }, pickup._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No pickups currently assigned.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow rounded-lg p-6 border border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold mb-4 text-gray-700\",\n          children: [\"Your Pickup History (\", pickupLogs.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this), pickupLogs.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-3 max-h-60 overflow-y-auto\",\n          children: [\" \", pickupLogs.map(log => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"bg-gray-50 p-3 rounded-md border border-gray-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-medium\",\n              children: [\"Request ID: \", log.pickupRequest]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: log.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 82\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 37\n            }, this), log.collectedKgs && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Collected: \", log.collectedKgs, \" KGs\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 58\n            }, this), log.notes && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Notes: \", log.notes]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 51\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500\",\n              children: [\"Logged On: \", moment(log.timestamp).format('YYYY-MM-DD HH:mm')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 37\n            }, this)]\n          }, log._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 33\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No pickup history found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow rounded-lg p-6 mb-8 border border-purple-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-semibold mb-4 text-purple-700\",\n        children: \"Available Pickups to Claim\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowUnassignedModal(true),\n        className: \"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out\",\n        children: [\"View & Claim Unassigned Pickups (\", unassignedPickups.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }, this), showUnassignedModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl p-8 w-11/12 md:w-2/3 lg:w-1/2 max-h-[90vh] overflow-y-auto relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold mb-6 text-purple-700\",\n          children: \"Unassigned Pickups\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowUnassignedModal(false),\n          className: \"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 25\n        }, this), unassignedPickups.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-4\",\n          children: unassignedPickups.map(pickup => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"bg-purple-50 p-4 rounded-md border border-purple-100 flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-medium\",\n                children: [\"Request ID: \", pickup._id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-700\",\n                children: [\"Location: \", pickup.address]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-700\",\n                children: [\"Scheduled: \", moment(pickup.pickupDate).format('YYYY-MM-DD'), \" at \", pickup.timeSlot]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-700\",\n                children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold text-purple-800\",\n                  children: pickup.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 90\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleAssignPickup(pickup._id),\n              className: \"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out\",\n              children: \"Claim This Pickup\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 41\n            }, this)]\n          }, pickup._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 37\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"No unassigned pickups available at the moment.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n};\n_s(WorkerDashboard, \"Cffo4yUuXjtHreg3JO+kpsHhZe8=\", false, function () {\n  return [useNavigate];\n});\n_c = WorkerDashboard;\nexport default WorkerDashboard;\nvar _c;\n$RefreshReg$(_c, \"WorkerDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","useNavigate","getWorkerProfile","getWorkerPickupRequests","getTodaysPendingPickups","updatePickupRequestStatus","getAllWorkerPickupLogs","getUnassignedPickups","assignPickup","moment","jsxDEV","_jsxDEV","Fragment","_Fragment","WorkerDashboard","_s","navigate","workerProfile","setWorkerProfile","assignedPickups","setAssignedPickups","todaysPendingPickups","setTodaysPendingPickups","unassignedPickups","setUnassignedPickups","pickupLogs","setPickupLogs","loading","setLoading","error","setError","showUnassignedModal","setShowUnassignedModal","fetchDashboardData","profile","assigned","pendingToday","logs","unassigned","err","console","message","includes","status","handleUpdateStatus","requestId","newStatus","collectedKgs","notes","statusData","parseFloat","alert","handleAssignPickup","pickupId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","username","email","phoneNumber","length","map","pickup","_id","address","timeSlot","onClick","prompt","pickupDate","format","log","pickupRequest","timestamp","_c","$RefreshReg$"],"sources":["C:/Users/ankao/OneDrive/Desktop/nilesh/E-waste/frontend/src/pages/WorkerDashboard.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    getWorkerProfile,\r\n    getWorkerPickupRequests,\r\n    getTodaysPendingPickups,\r\n    updatePickupRequestStatus,\r\n    getAllWorkerPickupLogs,\r\n    getUnassignedPickups, // Now correctly imported from workerApi\r\n    assignPickup          // Now correctly imported from workerApi\r\n} from '../services/workerApi';\r\nimport moment from 'moment'; // Assuming you have moment.js installed for date formatting\r\n\r\nconst WorkerDashboard = () => {\r\n    const navigate = useNavigate();\r\n    const [workerProfile, setWorkerProfile] = useState(null);\r\n    const [assignedPickups, setAssignedPickups] = useState([]);\r\n    const [todaysPendingPickups, setTodaysPendingPickups] = useState([]);\r\n    const [unassignedPickups, setUnassignedPickups] = useState([]); // State for unassigned pickups\r\n    const [pickupLogs, setPickupLogs] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [showUnassignedModal, setShowUnassignedModal] = useState(false); // State for modal visibility\r\n\r\n    // Function to fetch all dashboard data\r\n    const fetchDashboardData = useCallback(async () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const profile = await getWorkerProfile();\r\n            setWorkerProfile(profile);\r\n\r\n            const assigned = await getWorkerPickupRequests();\r\n            setAssignedPickups(assigned);\r\n\r\n            const pendingToday = await getTodaysPendingPickups();\r\n            setTodaysPendingPickups(pendingToday);\r\n\r\n            const logs = await getAllWorkerPickupLogs();\r\n            setPickupLogs(logs);\r\n\r\n            // Fetch unassigned pickups when dashboard data is loaded\r\n            const unassigned = await getUnassignedPickups();\r\n            setUnassignedPickups(unassigned);\r\n\r\n        } catch (err) {\r\n            console.error(\"Error fetching worker dashboard data:\", err);\r\n            setError(\"Failed to load dashboard data. Please try again.\");\r\n            if (err.message && err.message.includes(\"Authentication expired\") || (err.status === 401)) {\r\n                // If 401, redirect to login\r\n                navigate('/worker/login');\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [navigate]); // navigate is a stable dependency from useNavigate\r\n\r\n    useEffect(() => {\r\n        fetchDashboardData();\r\n    }, [fetchDashboardData]); // fetchDashboardData is now a stable dependency due to useCallback\r\n\r\n    const handleUpdateStatus = async (requestId, newStatus, collectedKgs, notes) => {\r\n        try {\r\n            // collectedKgs and notes are only relevant for 'COMPLETED' status\r\n            const statusData = { status: newStatus };\r\n            if (newStatus === 'COMPLETED') {\r\n                statusData.collectedKgs = parseFloat(collectedKgs); // Ensure it's a number\r\n                statusData.notes = notes;\r\n            }\r\n\r\n            await updatePickupRequestStatus(requestId, statusData);\r\n            alert(`Pickup request ${requestId} status updated to ${newStatus}.`);\r\n            // Re-fetch data to reflect the changes\r\n            fetchDashboardData();\r\n        } catch (err) {\r\n            console.error(\"Error updating pickup status:\", err);\r\n            setError(`Failed to update status for request ${requestId}.`);\r\n        }\r\n    };\r\n\r\n    const handleAssignPickup = async (pickupId) => {\r\n        try {\r\n            await assignPickup(pickupId);\r\n            alert(`Pickup request ${pickupId} assigned to you successfully!`);\r\n            // Re-fetch data to update both unassigned and assigned lists\r\n            fetchDashboardData();\r\n            setShowUnassignedModal(false); // Close modal after assignment\r\n        } catch (err) {\r\n            console.error(\"Error assigning pickup:\", err);\r\n            setError(`Failed to assign pickup ${pickupId}.`);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"text-center p-4\">Loading dashboard...</div>;\r\n    }\r\n\r\n    if (error) {\r\n        return <div className=\"text-red-500 text-center p-4\">Error: {error}</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-4\">\r\n            <h1 className=\"text-3xl font-bold mb-6 text-green-700\">Worker Dashboard</h1>\r\n\r\n            {workerProfile && (\r\n                <div className=\"bg-white shadow rounded-lg p-6 mb-8 border border-green-200\">\r\n                    <h2 className=\"text-2xl font-semibold mb-4 text-green-600\">Welcome, {workerProfile.username}!</h2>\r\n                    <p className=\"text-gray-700\">Email: {workerProfile.email}</p>\r\n                    <p className=\"text-gray-700\">Phone: {workerProfile.phoneNumber}</p>\r\n                    {/* Add more profile details as needed */}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\r\n                {/* Today's Pending Pickups */}\r\n                <div className=\"bg-white shadow rounded-lg p-6 border border-yellow-200\">\r\n                    <h2 className=\"text-xl font-semibold mb-4 text-yellow-700\">Today's Pending Pickups ({todaysPendingPickups.length})</h2>\r\n                    {todaysPendingPickups.length > 0 ? (\r\n                        <ul className=\"space-y-3\">\r\n                            {todaysPendingPickups.map((pickup) => (\r\n                                <li key={pickup._id} className=\"bg-yellow-50 p-3 rounded-md border border-yellow-100\">\r\n                                    <p className=\"font-medium\">Request ID: {pickup._id}</p>\r\n                                    <p className=\"text-sm text-gray-600\">Location: {pickup.address}</p>\r\n                                    <p className=\"text-sm text-gray-600\">Time Slot: {pickup.timeSlot}</p>\r\n                                    <p className=\"text-sm text-gray-600\">Status: <span className=\"font-semibold text-yellow-800\">{pickup.status}</span></p>\r\n                                    {/* Example action buttons */}\r\n                                    <div className=\"mt-2 space-x-2\">\r\n                                        {pickup.status === 'PENDING' && (\r\n                                            <>\r\n                                                <button\r\n                                                    onClick={() => handleUpdateStatus(pickup._id, 'COMPLETED', prompt(\"Enter collected KGs:\"), prompt(\"Enter notes:\"))}\r\n                                                    className=\"bg-green-500 hover:bg-green-600 text-white text-xs px-3 py-1 rounded\"\r\n                                                >\r\n                                                    Mark Completed\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => handleUpdateStatus(pickup._id, 'CANCELED', null, prompt(\"Enter cancellation reason:\"))}\r\n                                                    className=\"bg-red-500 hover:bg-red-600 text-white text-xs px-3 py-1 rounded\"\r\n                                                >\r\n                                                    Cancel\r\n                                                </button>\r\n                                            </>\r\n                                        )}\r\n                                    </div>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    ) : (\r\n                        <p className=\"text-gray-600\">No pending pickups for today.</p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* All Assigned Pickups */}\r\n                <div className=\"bg-white shadow rounded-lg p-6 border border-blue-200\">\r\n                    <h2 className=\"text-xl font-semibold mb-4 text-blue-700\">All Your Assigned Pickups ({assignedPickups.length})</h2>\r\n                    {assignedPickups.length > 0 ? (\r\n                        <ul className=\"space-y-3\">\r\n                            {assignedPickups.map((pickup) => (\r\n                                <li key={pickup._id} className=\"bg-blue-50 p-3 rounded-md border border-blue-100\">\r\n                                    <p className=\"font-medium\">Request ID: {pickup._id}</p>\r\n                                    <p className=\"text-sm text-gray-600\">Location: {pickup.address}</p>\r\n                                    <p className=\"text-sm text-gray-600\">Scheduled: {moment(pickup.pickupDate).format('YYYY-MM-DD')} at {pickup.timeSlot}</p>\r\n                                    <p className=\"text-sm text-gray-600\">Status: <span className={`font-semibold ${pickup.status === 'PENDING' ? 'text-yellow-800' : 'text-green-800'}`}>{pickup.status}</span></p>\r\n                                    {/* Additional details or actions can go here */}\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    ) : (\r\n                        <p className=\"text-gray-600\">No pickups currently assigned.</p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Pickup Logs/History */}\r\n                <div className=\"bg-white shadow rounded-lg p-6 border border-gray-200\">\r\n                    <h2 className=\"text-xl font-semibold mb-4 text-gray-700\">Your Pickup History ({pickupLogs.length})</h2>\r\n                    {pickupLogs.length > 0 ? (\r\n                        <ul className=\"space-y-3 max-h-60 overflow-y-auto\"> {/* Added max-h and overflow for scroll */}\r\n                            {pickupLogs.map((log) => (\r\n                                <li key={log._id} className=\"bg-gray-50 p-3 rounded-md border border-gray-100\">\r\n                                    <p className=\"font-medium\">Request ID: {log.pickupRequest}</p>\r\n                                    <p className=\"text-sm text-gray-600\">Status: <span className=\"font-semibold\">{log.status}</span></p>\r\n                                    {log.collectedKgs && <p className=\"text-sm text-gray-600\">Collected: {log.collectedKgs} KGs</p>}\r\n                                    {log.notes && <p className=\"text-sm text-gray-600\">Notes: {log.notes}</p>}\r\n                                    <p className=\"text-sm text-gray-500\">Logged On: {moment(log.timestamp).format('YYYY-MM-DD HH:mm')}</p>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    ) : (\r\n                        <p className=\"text-gray-600\">No pickup history found.</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Section for Unassigned Pickups - Button to open modal */}\r\n            <div className=\"bg-white shadow rounded-lg p-6 mb-8 border border-purple-200\">\r\n                <h2 className=\"text-2xl font-semibold mb-4 text-purple-700\">Available Pickups to Claim</h2>\r\n                <button\r\n                    onClick={() => setShowUnassignedModal(true)}\r\n                    className=\"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out\"\r\n                >\r\n                    View & Claim Unassigned Pickups ({unassignedPickups.length})\r\n                </button>\r\n            </div>\r\n\r\n            {/* Unassigned Pickups Modal */}\r\n            {showUnassignedModal && (\r\n                <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50\">\r\n                    <div className=\"bg-white rounded-lg shadow-xl p-8 w-11/12 md:w-2/3 lg:w-1/2 max-h-[90vh] overflow-y-auto relative\">\r\n                        <h2 className=\"text-2xl font-bold mb-6 text-purple-700\">Unassigned Pickups</h2>\r\n                        <button\r\n                            onClick={() => setShowUnassignedModal(false)}\r\n                            className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold\"\r\n                        >\r\n                            &times;\r\n                        </button>\r\n                        {unassignedPickups.length > 0 ? (\r\n                            <ul className=\"space-y-4\">\r\n                                {unassignedPickups.map((pickup) => (\r\n                                    <li key={pickup._id} className=\"bg-purple-50 p-4 rounded-md border border-purple-100 flex justify-between items-center\">\r\n                                        <div>\r\n                                            <p className=\"font-medium\">Request ID: {pickup._id}</p>\r\n                                            <p className=\"text-sm text-gray-700\">Location: {pickup.address}</p>\r\n                                            <p className=\"text-sm text-gray-700\">Scheduled: {moment(pickup.pickupDate).format('YYYY-MM-DD')} at {pickup.timeSlot}</p>\r\n                                            <p className=\"text-sm text-gray-700\">Status: <span className=\"font-semibold text-purple-800\">{pickup.status}</span></p>\r\n                                        </div>\r\n                                        <button\r\n                                            onClick={() => handleAssignPickup(pickup._id)}\r\n                                            className=\"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md shadow-md transition duration-300 ease-in-out\"\r\n                                        >\r\n                                            Claim This Pickup\r\n                                        </button>\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        ) : (\r\n                            <p className=\"text-gray-600\">No unassigned pickups available at the moment.</p>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default WorkerDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}