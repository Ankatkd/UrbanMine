{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ankao\\\\OneDrive\\\\Desktop\\\\nilesh\\\\E-waste\\\\frontend\\\\src\\\\pages\\\\Pickup.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\n\n// Function to load the Razorpay script dynamically to ensure it's available\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst loadRazorpayScript = () => {\n  return new Promise(resolve => {\n    const script = document.createElement('script');\n    script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n    script.onload = () => {\n      resolve(true);\n    };\n    script.onerror = () => {\n      resolve(false);\n    };\n    document.body.appendChild(script);\n  });\n};\nfunction Pickup() {\n  _s();\n  const navigate = useNavigate();\n  const fileInputRef = useRef(null); // Reference for file input\n\n  // State for pickup request form data\n  const [formData, setFormData] = useState({\n    userId: '',\n    date: null,\n    // Initialized to null, will be a Date object from DatePicker\n    time: '',\n    address: '',\n    pincode: '',\n    city: '',\n    state: '',\n    schedulerName: '',\n    phone: '',\n    email: '',\n    image: null,\n    // For storing the File object\n    wasteType: ''\n  });\n  const [imagePreview, setImagePreview] = useState(null); // For displaying image preview\n  const [loading, setLoading] = useState(false); // For showing loading state\n  const [pincodeError, setPincodeError] = useState(''); // For pincode validation messages\n  const [dailyPickupCounts, setDailyPickupCounts] = useState({}); // To store pickup counts per day\n  const MAX_PICKUPS_PER_DAY = 5; // Define your daily pickup limit\n\n  // IMPORTANT: Set your fixed payment price here in Rupees.\n  // This value will be sent to the backend. The backend will convert it to paisa.\n  const FIXED_PICKUP_PRICE_RUPEES = 40;\n\n  // Razorpay Public Key ID (starts with rzp_test_...). Get this from your Razorpay Dashboard.\n  const RAZORPAY_KEY_ID = 'rzp_test_bx3dOuw8U5uwJ3'; // <--- IMPORTANT: REPLACE THIS WITH YOUR ACTUAL RAZORPAY PUBLIC KEY!\n\n  // Effect to check login status and fetch user data on mount\n  useEffect(() => {\n    const isLoggedIn = localStorage.getItem('isLoggedIn');\n    const storedUserId = localStorage.getItem('userId');\n    if (!isLoggedIn || !storedUserId) {\n      navigate('/login');\n      return;\n    }\n    const fetchUserData = async () => {\n      try {\n        // Assuming you have an API endpoint to get current user's profile based on userId\n        const response = await axios.get(`http://localhost:8082/api/user/${storedUserId}`);\n        const userData = response.data;\n        setFormData(prevDetails => ({\n          ...prevDetails,\n          userId: userData.id,\n          address: userData.location || '',\n          // Assuming 'location' field stores address\n          phone: userData.phone || '',\n          email: userData.email || '',\n          schedulerName: userData.fullname || '' // Assuming 'fullname' is the user's name\n        }));\n      } catch (error) {\n        console.error('Failed to fetch user data:', error);\n        // Optionally, navigate to login or show an error\n      }\n    };\n    setFormData(prev => ({\n      ...prev,\n      userId: storedUserId\n    })); // Set userId from localStorage first\n    fetchUserData();\n  }, [navigate]);\n\n  // Effect to fetch daily pickup counts from backend\n  useEffect(() => {\n    const fetchPickupCounts = async () => {\n      const today = new Date();\n      // Fetch counts from the current month start to two months from now end\n      const startDate = new Date(today.getFullYear(), today.getMonth(), 1).toISOString().split('T')[0];\n      const futureDate = new Date(today.getFullYear(), today.getMonth() + 2, 0); // Last day of two months from now\n      const endDate = futureDate.toISOString().split('T')[0];\n      try {\n        // Assuming you have an endpoint for this in your backend\n        const response = await axios.get(`http://localhost:8082/api/pickups/counts?startDate=${startDate}&endDate=${endDate}`);\n        console.log('Backend raw pickup counts response (list of DTOs?):', response.data); // DEBUG LOG\n\n        // Transform the array of {date, count} objects into a {dateString: count} map\n        const transformedCounts = {};\n        if (Array.isArray(response.data)) {\n          // Ensure it's an array before mapping\n          response.data.forEach(item => {\n            if (item.date && typeof item.count === 'number') {\n              transformedCounts[item.date] = item.count;\n            }\n          });\n        }\n        setDailyPickupCounts(transformedCounts);\n        console.log('Transformed dailyPickupCounts state (frontend):', transformedCounts); // DEBUG LOG\n      } catch (error) {\n        console.error('Error fetching daily pickup counts:', error);\n      }\n    };\n    fetchPickupCounts();\n  }, []);\n\n  // DEBUG: Log dailyPickupCounts whenever it changes\n  useEffect(() => {\n    console.log('Current dailyPickupCounts state (frontend):', dailyPickupCounts);\n    // Specifically log for June 20 and 21 (adjust year as needed)\n    // Adjust the year to the current year as the date picker will display current year\n    const currentYear = new Date().getFullYear();\n    console.log(`Count for ${currentYear}-06-20:`, dailyPickupCounts[`${currentYear}-06-20`]);\n    console.log(`Count for ${currentYear}-06-21:`, dailyPickupCounts[`${currentYear}-06-21`]);\n  }, [dailyPickupCounts]);\n\n  // Effect to watch for pincode changes and fetch city/state\n  useEffect(() => {\n    const fetchLocation = async () => {\n      const {\n        pincode\n      } = formData;\n      if (pincode.length === 6) {\n        setPincodeError('');\n        try {\n          const response = await fetch(`https://api.postalpincode.in/pincode/${pincode}`);\n          const data = await response.json();\n          if (data && data[0] && data[0].Status === 'Success') {\n            const postOffice = data[0].PostOffice[0];\n            setFormData(prev => ({\n              ...prev,\n              city: postOffice.District,\n              state: postOffice.State\n            }));\n          } else {\n            setPincodeError('Invalid Pincode. Please enter a valid 6-digit Pincode.');\n            setFormData(prev => ({\n              ...prev,\n              city: '',\n              state: ''\n            }));\n          }\n        } catch (error) {\n          console.error('Error fetching pincode data:', error);\n          setPincodeError('Failed to fetch location. Please enter manually.');\n          setFormData(prev => ({\n            ...prev,\n            city: '',\n            state: ''\n          }));\n        }\n      } else if (pincode.length > 0 && pincode.length < 6) {\n        setPincodeError('Pincode must be 6 digits.');\n        setFormData(prev => ({\n          ...prev,\n          city: '',\n          state: ''\n        }));\n      } else {\n        setPincodeError('');\n        setFormData(prev => ({\n          ...prev,\n          city: '',\n          state: ''\n        }));\n      }\n    };\n    const debounceTimeout = setTimeout(() => {\n      fetchLocation();\n    }, 500);\n    return () => clearTimeout(debounceTimeout);\n  }, [formData.pincode]);\n  const getTodayDate = () => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    return today;\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleDateChange = date => {\n    console.log(\"Selected Date:\", date); // DEBUG\n    setFormData(prev => ({\n      ...prev,\n      date: date\n    })); // DatePicker returns a Date object\n  };\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      setFormData(prev => ({\n        ...prev,\n        image: file\n      }));\n      setImagePreview(URL.createObjectURL(file));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        image: null\n      }));\n      setImagePreview(null);\n    }\n  };\n\n  // Function to submit pickup details after successful payment or for charity users\n  const submitPickupDetails = async () => {\n    setLoading(true);\n    const submitFormData = new FormData();\n    submitFormData.append('userId', formData.userId);\n    submitFormData.append('date', formData.date ? formData.date.toISOString().split('T')[0] : ''); // Format date\n    submitFormData.append('time', formData.time);\n    submitFormData.append('address', formData.address);\n    submitFormData.append('pincode', formData.pincode);\n    submitFormData.append('city', formData.city);\n    submitFormData.append('state', formData.state);\n    submitFormData.append('schedulerName', formData.schedulerName);\n    submitFormData.append('phone', formData.phone);\n    submitFormData.append('email', formData.email);\n    submitFormData.append('wasteType', formData.wasteType);\n    // Set status based on user role (e.g., 'Paid - Pending Pickup' or 'Pending' for charity)\n    submitFormData.append('status', localStorage.getItem('userRole') === 'charity' ? 'Pending' : 'Paid - Pending Pickup');\n    if (formData.image) {\n      submitFormData.append('image', formData.image);\n    }\n    try {\n      // Your backend endpoint for scheduling pickup (assuming it's the razorpay/success endpoint for now)\n      const res = await axios.post('http://localhost:8082/api/razorpay/success', submitFormData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      if (res.status === 200 && res.data.status === 'success') {\n        // Check both HTTP status and custom status field\n        alert('Pickup scheduled successfully!');\n        navigate('/profile'); // Navigate to user's profile/dashboard\n        // Optimistically update local pickup counts for the scheduled date\n        const dateString = formData.date.toISOString().split('T')[0];\n        setDailyPickupCounts(prev => ({\n          ...prev,\n          [dateString]: (prev[dateString] || 0) + 1\n        }));\n      } else {\n        alert(`Failed to schedule pickup. Server response: ${res.data.message || 'Unknown error.'}`);\n      }\n    } catch (err) {\n      console.error('Error submitting pickup details:', err);\n      // Enhanced error message for the specific 'Data too long' issue\n      if (err.response && err.response.data && err.response.data.message && err.response.data.message.includes('Data too long for column \\'status\\'')) {\n        alert('Failed to schedule pickup: The status field (e.g., \"Paid - Pending Pickup\") might be too long for the database column. Please inform the administrator.');\n      } else {\n        alert('Error occurred while scheduling pickup. Please try again.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Function to handle payment initiation for non-charity users\n  const handlePayment = async () => {\n    // Basic frontend validation before proceeding to payment\n    if (!formData.date || !formData.time || !formData.address || !formData.pincode || !formData.city || !formData.state || !formData.schedulerName || !formData.phone || !formData.email || !formData.wasteType || !formData.image) {\n      alert(\"Please fill in all required fields and upload an image before proceeding to payment.\");\n      return;\n    }\n    if (pincodeError) {\n      alert(pincodeError);\n      return;\n    }\n\n    // Check daily pickup limit for the selected date\n    if (formData.date) {\n      const dateString = formData.date.toISOString().split('T')[0];\n      const selectedDateCount = dailyPickupCounts[dateString] || 0;\n      console.log(`Checking limit: Date ${dateString}, Count ${selectedDateCount}, Max ${MAX_PICKUPS_PER_DAY}`); // DEBUG\n      if (selectedDateCount >= MAX_PICKUPS_PER_DAY) {\n        alert(`Sorry, the selected date (${dateString}) has reached its maximum number of pickups (${MAX_PICKUPS_PER_DAY}). Please choose another date.`);\n        return;\n      }\n    }\n    setLoading(true);\n    const scriptLoaded = await loadRazorpayScript();\n    if (!scriptLoaded) {\n      alert('Razorpay SDK failed to load. Please check your internet connection.');\n      setLoading(false);\n      return;\n    }\n    try {\n      // 1. Call backend to create Razorpay Order\n      // Use axios for this\n      const orderRes = await axios.post('http://localhost:8082/api/razorpay/create-order', {\n        amount: FIXED_PICKUP_PRICE_RUPEES // Send amount in Rupees to backend\n      });\n      const orderData = orderRes.data; // Axios automatically parses JSON\n\n      // 2. Configure Razorpay checkout options\n      const options = {\n        key: RAZORPAY_KEY_ID,\n        // Your public Razorpay Key ID\n        amount: orderData.amount,\n        // Amount in PAISA from the backend response\n        currency: orderData.currency,\n        // Currency from backend response\n        name: 'E-Waste Management',\n        description: 'Pickup Charge',\n        order_id: orderData.id,\n        // Order ID from backend response\n        handler: async response => {\n          // This function runs on successful payment\n          alert('Payment successful! Payment ID: ' + response.razorpay_payment_id);\n          // After successful payment, submit the pickup details to your backend\n          await submitPickupDetails();\n        },\n        prefill: {\n          name: formData.schedulerName,\n          email: formData.email,\n          contact: formData.phone\n        },\n        theme: {\n          color: '#2f855a'\n        }\n      };\n      const razor = new window.Razorpay(options);\n      razor.on('payment.failed', function (response) {\n        alert(\"Payment failed: \" + response.error.code + \" - \" + response.error.description);\n        console.error(\"Payment failed details:\", response.error);\n        setLoading(false);\n      });\n      razor.open(); // Open the Razorpay payment modal\n    } catch (err) {\n      console.error('Payment initiation failed:', err);\n      let errorMessage = 'Payment initiation failed: ';\n      if (err.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        errorMessage += err.response.data.message || err.response.data.error || err.response.statusText;\n      } else if (err.request) {\n        // The request was made but no response was received\n        errorMessage += 'No response from backend. Is the backend running?';\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        errorMessage += err.message;\n      }\n      alert(errorMessage);\n      setLoading(false);\n    }\n  };\n\n  // Main form submission handler\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    // Perform basic validation before proceeding\n    if (!formData.image) {\n      alert(\"Please upload an image of the item.\");\n      return;\n    }\n    if (pincodeError) {\n      alert(pincodeError);\n      return;\n    }\n\n    // Check daily pickup limit on submit as well (redundant with handlePayment, but good for charity path)\n    if (formData.date) {\n      const dateString = formData.date.toISOString().split('T')[0];\n      const selectedDateCount = dailyPickupCounts[dateString] || 0;\n      if (selectedDateCount >= MAX_PICKUPS_PER_DAY) {\n        alert(`Sorry, the selected date (${dateString}) has reached its maximum number of pickups (${MAX_PICKUPS_PER_DAY}). Please choose another date.`);\n        return;\n      }\n    }\n    const userRole = localStorage.getItem('userRole'); // Get user role from local storage\n    if (userRole === 'charity') {\n      submitPickupDetails(); // Charity users don't pay\n    } else {\n      handlePayment(); // Regular users proceed to payment\n    }\n  };\n\n  // Helper functions for DatePicker styling\n  const isDateDisabled = date => {\n    const dateString = date.toISOString().split('T')[0];\n    const count = dailyPickupCounts[dateString] || 0;\n    console.log(`DatePicker: Checking ${dateString}, Count: ${count}, Disabled: ${count >= MAX_PICKUPS_PER_DAY}`); // DEBUG\n    return count >= MAX_PICKUPS_PER_DAY;\n  };\n  const highlightDates = date => {\n    const dateString = date.toISOString().split('T')[0];\n    const count = dailyPickupCounts[dateString] || 0;\n    console.log(`DatePicker Highlight: Checking ${dateString}, Count: ${count}, Class: ${count >= MAX_PICKUPS_PER_DAY ? 'red-date' : ''}`); // DEBUG\n    return count >= MAX_PICKUPS_PER_DAY ? 'red-date' : '';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex bg-gray-50 min-h-screen font-sans\",\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-1 p-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/profile'),\n          className: \"mb-6 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out\",\n          children: \"\\u2190 Back to Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold mb-8 text-green-700 text-center\",\n          children: \"Schedule E-Waste Pickup\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"date\",\n                className: \"block text-gray-700 text-sm font-medium mb-2\",\n                children: \"Pickup Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n                selected: formData.date,\n                onChange: handleDateChange,\n                minDate: getTodayDate(),\n                dateFormat: \"yyyy-MM-dd\",\n                placeholderText: \"Select Date\",\n                className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\",\n                wrapperClassName: \"w-full\",\n                required: true,\n                filterDate: date => {\n                  const today = getTodayDate();\n                  // Only enable future dates and dates not explicitly marked as disabled by count\n                  return date >= today && !isDateDisabled(date);\n                },\n                dayClassName: highlightDates\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"time\",\n                className: \"block text-gray-700 text-sm font-medium mb-2\",\n                children: \"Pickup Time\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"time\",\n                id: \"time\",\n                name: \"time\",\n                value: formData.time,\n                onChange: handleChange,\n                required: true,\n                className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"address\",\n              className: \"block text-gray-700 text-sm font-medium mb-2\",\n              children: \"Full Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"address\",\n              name: \"address\",\n              value: formData.address,\n              onChange: handleChange,\n              placeholder: \"House No., Street, Locality\",\n              required: true,\n              rows: \"3\",\n              className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out resize-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"pincode\",\n                className: \"block text-gray-700 text-sm font-medium mb-2\",\n                children: \"Pincode\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"pincode\",\n                name: \"pincode\",\n                value: formData.pincode,\n                onChange: handleChange,\n                placeholder: \"Enter 6-digit Pincode\",\n                required: true,\n                className: `w-full p-3 border rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out ${pincodeError ? 'border-red-500' : 'border-gray-300'}`,\n                maxLength: \"6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 33\n              }, this), pincodeError && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-red-500 text-xs mt-1\",\n                children: pincodeError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 50\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"city\",\n                className: \"block text-gray-700 text-sm font-medium mb-2\",\n                children: \"City\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 492,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"city\",\n                name: \"city\",\n                value: formData.city,\n                onChange: handleChange,\n                placeholder: \"City\",\n                required: true,\n                className: \"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed\",\n                readOnly: true // City auto-filled by pincode\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"state\",\n                className: \"block text-gray-700 text-sm font-medium mb-2\",\n                children: \"State\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"state\",\n                name: \"state\",\n                value: formData.state,\n                onChange: handleChange,\n                placeholder: \"State\",\n                required: true,\n                className: \"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed\",\n                readOnly: true // State auto-filled by pincode\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"schedulerName\",\n                className: \"block text-gray-700 text-sm font-medium mb-2\",\n                children: \"Your Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"schedulerName\",\n                name: \"schedulerName\",\n                value: formData.schedulerName,\n                onChange: handleChange,\n                placeholder: \"Your Full Name\",\n                required: true,\n                className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 525,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"phone\",\n                className: \"block text-gray-700 text-sm font-medium mb-2\",\n                children: \"Phone Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"tel\",\n                id: \"phone\",\n                name: \"phone\",\n                value: formData.phone,\n                onChange: handleChange,\n                placeholder: \"e.g., 9876543210\",\n                required: true,\n                className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 538,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email\",\n              className: \"block text-gray-700 text-sm font-medium mb-2\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              id: \"email\",\n              name: \"email\",\n              value: formData.email,\n              onChange: handleChange,\n              placeholder: \"you@example.com\",\n              required: true,\n              className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"wasteType\",\n              className: \"block text-gray-700 text-sm font-medium mb-2\",\n              children: \"Select E-Waste Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"wasteType\",\n              name: \"wasteType\",\n              value: formData.wasteType,\n              onChange: handleChange,\n              required: true,\n              className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Waste Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"COMPUTERS\",\n                children: \"Computers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"LAPTOPS\",\n                children: \"Laptops\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"MONITORS\",\n                children: \"Monitors\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"TELEVISIONS\",\n                children: \"Televisions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"MOBILE_PHONES\",\n                children: \"Mobile Phones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"TABLETS\",\n                children: \"Tablets\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"BATTERIES\",\n                children: \"Batteries\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"PRINTERS\",\n                children: \"Printers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"FAX_MACHINES\",\n                children: \"Fax Machines\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"SCANNERS\",\n                children: \"Scanners\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"KEYBOARDS\",\n                children: \"Keyboards\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"MICE\",\n                children: \"Mice\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"CHARGERS\",\n                children: \"Chargers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 590,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"AUDIO_EQUIPMENT\",\n                children: \"Audio Equipment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"CABLES\",\n                children: \"Cables\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"CIRCUIT_BOARDS\",\n                children: \"Circuit Boards\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"GAME_CONSOLES\",\n                children: \"Game Consoles\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"CAMERAS\",\n                children: \"Cameras\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"POWER_STRIPS\",\n                children: \"Power Strips\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"REFRIGERATORS\",\n                children: \"Refrigerators\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 597,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"imageUpload\",\n              className: \"block text-gray-700 text-sm font-medium mb-2\",\n              children: \"Upload Image of Item(s)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"imageUpload\",\n              name: \"image\",\n              accept: \"image/*\",\n              ref: fileInputRef,\n              onChange: handleImageChange,\n              className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 29\n            }, this), imagePreview && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: imagePreview,\n              alt: \"Preview\",\n              className: \"mt-4 w-48 h-48 object-cover rounded-lg shadow-md\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 615,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-lg text-gray-700 font-semibold mt-4 text-center\",\n            children: localStorage.getItem('userRole') === 'charity' ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-green-600\",\n              children: \"No pickup charge for charity organizations.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Pickup Service Fee: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-700\",\n                children: [\"\\u20B9\", FIXED_PICKUP_PRICE_RUPEES]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 624,\n                columnNumber: 59\n              }, this), \" (via Razorpay)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 620,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: loading,\n              className: \"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg\",\n              children: loading ? 'Processing...' : 'Schedule Pickup'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 413,\n    columnNumber: 9\n  }, this);\n}\n_s(Pickup, \"itxpvyMwLLA/9HT3cPnkz1gOSD4=\", false, function () {\n  return [useNavigate];\n});\n_c = Pickup;\nexport default Pickup;\nvar _c;\n$RefreshReg$(_c, \"Pickup\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","useNavigate","DatePicker","jsxDEV","_jsxDEV","loadRazorpayScript","Promise","resolve","script","document","createElement","src","onload","onerror","body","appendChild","Pickup","_s","navigate","fileInputRef","formData","setFormData","userId","date","time","address","pincode","city","state","schedulerName","phone","email","image","wasteType","imagePreview","setImagePreview","loading","setLoading","pincodeError","setPincodeError","dailyPickupCounts","setDailyPickupCounts","MAX_PICKUPS_PER_DAY","FIXED_PICKUP_PRICE_RUPEES","RAZORPAY_KEY_ID","isLoggedIn","localStorage","getItem","storedUserId","fetchUserData","response","get","userData","data","prevDetails","id","location","fullname","error","console","prev","fetchPickupCounts","today","Date","startDate","getFullYear","getMonth","toISOString","split","futureDate","endDate","log","transformedCounts","Array","isArray","forEach","item","count","currentYear","fetchLocation","length","fetch","json","Status","postOffice","PostOffice","District","State","debounceTimeout","setTimeout","clearTimeout","getTodayDate","setHours","handleChange","e","name","value","target","handleDateChange","handleImageChange","file","files","URL","createObjectURL","submitPickupDetails","submitFormData","FormData","append","res","post","headers","status","alert","dateString","message","err","includes","handlePayment","selectedDateCount","scriptLoaded","orderRes","amount","orderData","options","key","currency","description","order_id","handler","razorpay_payment_id","prefill","contact","theme","color","razor","window","Razorpay","on","code","open","errorMessage","statusText","request","handleSubmit","preventDefault","userRole","isDateDisabled","highlightDates","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","selected","onChange","minDate","dateFormat","placeholderText","wrapperClassName","required","filterDate","dayClassName","type","placeholder","rows","maxLength","readOnly","accept","ref","alt","disabled","_c","$RefreshReg$"],"sources":["C:/Users/ankao/OneDrive/Desktop/nilesh/E-waste/frontend/src/pages/Pickup.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\n\r\n// Function to load the Razorpay script dynamically to ensure it's available\r\nconst loadRazorpayScript = () => {\r\n    return new Promise((resolve) => {\r\n        const script = document.createElement('script');\r\n        script.src = 'https://checkout.razorpay.com/v1/checkout.js';\r\n        script.onload = () => {\r\n            resolve(true);\r\n        };\r\n        script.onerror = () => {\r\n            resolve(false);\r\n        };\r\n        document.body.appendChild(script);\r\n    });\r\n};\r\n\r\nfunction Pickup() {\r\n    const navigate = useNavigate();\r\n    const fileInputRef = useRef(null); // Reference for file input\r\n\r\n    // State for pickup request form data\r\n    const [formData, setFormData] = useState({\r\n        userId: '',\r\n        date: null, // Initialized to null, will be a Date object from DatePicker\r\n        time: '',\r\n        address: '',\r\n        pincode: '',\r\n        city: '',\r\n        state: '',\r\n        schedulerName: '',\r\n        phone: '',\r\n        email: '',\r\n        image: null, // For storing the File object\r\n        wasteType: '',\r\n    });\r\n\r\n    const [imagePreview, setImagePreview] = useState(null); // For displaying image preview\r\n    const [loading, setLoading] = useState(false); // For showing loading state\r\n    const [pincodeError, setPincodeError] = useState(''); // For pincode validation messages\r\n    const [dailyPickupCounts, setDailyPickupCounts] = useState({}); // To store pickup counts per day\r\n    const MAX_PICKUPS_PER_DAY = 5; // Define your daily pickup limit\r\n\r\n    // IMPORTANT: Set your fixed payment price here in Rupees.\r\n    // This value will be sent to the backend. The backend will convert it to paisa.\r\n    const FIXED_PICKUP_PRICE_RUPEES = 40;\r\n\r\n    // Razorpay Public Key ID (starts with rzp_test_...). Get this from your Razorpay Dashboard.\r\n    const RAZORPAY_KEY_ID = 'rzp_test_bx3dOuw8U5uwJ3'; // <--- IMPORTANT: REPLACE THIS WITH YOUR ACTUAL RAZORPAY PUBLIC KEY!\r\n\r\n    // Effect to check login status and fetch user data on mount\r\n    useEffect(() => {\r\n        const isLoggedIn = localStorage.getItem('isLoggedIn');\r\n        const storedUserId = localStorage.getItem('userId');\r\n        if (!isLoggedIn || !storedUserId) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        const fetchUserData = async () => {\r\n            try {\r\n                // Assuming you have an API endpoint to get current user's profile based on userId\r\n                const response = await axios.get(`http://localhost:8082/api/user/${storedUserId}`);\r\n                const userData = response.data;\r\n                setFormData(prevDetails => ({\r\n                    ...prevDetails,\r\n                    userId: userData.id,\r\n                    address: userData.location || '', // Assuming 'location' field stores address\r\n                    phone: userData.phone || '',\r\n                    email: userData.email || '',\r\n                    schedulerName: userData.fullname || '', // Assuming 'fullname' is the user's name\r\n                }));\r\n            } catch (error) {\r\n                console.error('Failed to fetch user data:', error);\r\n                // Optionally, navigate to login or show an error\r\n            }\r\n        };\r\n\r\n        setFormData(prev => ({ ...prev, userId: storedUserId })); // Set userId from localStorage first\r\n        fetchUserData();\r\n    }, [navigate]);\r\n\r\n    // Effect to fetch daily pickup counts from backend\r\n    useEffect(() => {\r\n        const fetchPickupCounts = async () => {\r\n            const today = new Date();\r\n            // Fetch counts from the current month start to two months from now end\r\n            const startDate = new Date(today.getFullYear(), today.getMonth(), 1).toISOString().split('T')[0];\r\n            const futureDate = new Date(today.getFullYear(), today.getMonth() + 2, 0); // Last day of two months from now\r\n            const endDate = futureDate.toISOString().split('T')[0];\r\n\r\n            try {\r\n                // Assuming you have an endpoint for this in your backend\r\n                const response = await axios.get(`http://localhost:8082/api/pickups/counts?startDate=${startDate}&endDate=${endDate}`);\r\n                console.log('Backend raw pickup counts response (list of DTOs?):', response.data); // DEBUG LOG\r\n\r\n                // Transform the array of {date, count} objects into a {dateString: count} map\r\n                const transformedCounts = {};\r\n                if (Array.isArray(response.data)) { // Ensure it's an array before mapping\r\n                    response.data.forEach(item => {\r\n                        if (item.date && typeof item.count === 'number') {\r\n                            transformedCounts[item.date] = item.count;\r\n                        }\r\n                    });\r\n                }\r\n                setDailyPickupCounts(transformedCounts);\r\n                console.log('Transformed dailyPickupCounts state (frontend):', transformedCounts); // DEBUG LOG\r\n            } catch (error) {\r\n                console.error('Error fetching daily pickup counts:', error);\r\n            }\r\n        };\r\n        fetchPickupCounts();\r\n    }, []);\r\n\r\n    // DEBUG: Log dailyPickupCounts whenever it changes\r\n    useEffect(() => {\r\n        console.log('Current dailyPickupCounts state (frontend):', dailyPickupCounts);\r\n        // Specifically log for June 20 and 21 (adjust year as needed)\r\n        // Adjust the year to the current year as the date picker will display current year\r\n        const currentYear = new Date().getFullYear();\r\n        console.log(`Count for ${currentYear}-06-20:`, dailyPickupCounts[`${currentYear}-06-20`]);\r\n        console.log(`Count for ${currentYear}-06-21:`, dailyPickupCounts[`${currentYear}-06-21`]);\r\n    }, [dailyPickupCounts]);\r\n\r\n\r\n    // Effect to watch for pincode changes and fetch city/state\r\n    useEffect(() => {\r\n        const fetchLocation = async () => {\r\n            const { pincode } = formData;\r\n            if (pincode.length === 6) {\r\n                setPincodeError('');\r\n                try {\r\n                    const response = await fetch(`https://api.postalpincode.in/pincode/${pincode}`);\r\n                    const data = await response.json();\r\n\r\n                    if (data && data[0] && data[0].Status === 'Success') {\r\n                        const postOffice = data[0].PostOffice[0];\r\n                        setFormData((prev) => ({\r\n                            ...prev,\r\n                            city: postOffice.District,\r\n                            state: postOffice.State,\r\n                        }));\r\n                    } else {\r\n                        setPincodeError('Invalid Pincode. Please enter a valid 6-digit Pincode.');\r\n                        setFormData((prev) => ({\r\n                            ...prev,\r\n                            city: '',\r\n                            state: '',\r\n                        }));\r\n                    }\r\n                } catch (error) {\r\n                    console.error('Error fetching pincode data:', error);\r\n                    setPincodeError('Failed to fetch location. Please enter manually.');\r\n                    setFormData((prev) => ({\r\n                        ...prev,\r\n                        city: '',\r\n                        state: '',\r\n                    }));\r\n                }\r\n            } else if (pincode.length > 0 && pincode.length < 6) {\r\n                setPincodeError('Pincode must be 6 digits.');\r\n                setFormData((prev) => ({\r\n                    ...prev,\r\n                    city: '',\r\n                    state: '',\r\n                }));\r\n            } else {\r\n                setPincodeError('');\r\n                setFormData((prev) => ({\r\n                    ...prev,\r\n                    city: '',\r\n                    state: '',\r\n                }));\r\n            }\r\n        };\r\n\r\n        const debounceTimeout = setTimeout(() => {\r\n            fetchLocation();\r\n        }, 500);\r\n\r\n        return () => clearTimeout(debounceTimeout);\r\n    }, [formData.pincode]);\r\n\r\n\r\n    const getTodayDate = () => {\r\n        const today = new Date();\r\n        today.setHours(0, 0, 0, 0);\r\n        return today;\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prev) => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleDateChange = (date) => {\r\n        console.log(\"Selected Date:\", date); // DEBUG\r\n        setFormData((prev) => ({ ...prev, date: date })); // DatePicker returns a Date object\r\n    };\r\n\r\n    const handleImageChange = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            setFormData((prev) => ({ ...prev, image: file }));\r\n            setImagePreview(URL.createObjectURL(file));\r\n        } else {\r\n            setFormData((prev) => ({ ...prev, image: null }));\r\n            setImagePreview(null);\r\n        }\r\n    };\r\n\r\n    // Function to submit pickup details after successful payment or for charity users\r\n    const submitPickupDetails = async () => {\r\n        setLoading(true);\r\n        const submitFormData = new FormData();\r\n        submitFormData.append('userId', formData.userId);\r\n        submitFormData.append('date', formData.date ? formData.date.toISOString().split('T')[0] : ''); // Format date\r\n        submitFormData.append('time', formData.time);\r\n        submitFormData.append('address', formData.address);\r\n        submitFormData.append('pincode', formData.pincode);\r\n        submitFormData.append('city', formData.city);\r\n        submitFormData.append('state', formData.state);\r\n        submitFormData.append('schedulerName', formData.schedulerName);\r\n        submitFormData.append('phone', formData.phone);\r\n        submitFormData.append('email', formData.email);\r\n        submitFormData.append('wasteType', formData.wasteType);\r\n        // Set status based on user role (e.g., 'Paid - Pending Pickup' or 'Pending' for charity)\r\n        submitFormData.append('status', localStorage.getItem('userRole') === 'charity' ? 'Pending' : 'Paid - Pending Pickup');\r\n        if (formData.image) {\r\n            submitFormData.append('image', formData.image);\r\n        }\r\n\r\n        try {\r\n            // Your backend endpoint for scheduling pickup (assuming it's the razorpay/success endpoint for now)\r\n            const res = await axios.post('http://localhost:8082/api/razorpay/success', submitFormData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n            });\r\n\r\n            if (res.status === 200 && res.data.status === 'success') { // Check both HTTP status and custom status field\r\n                alert('Pickup scheduled successfully!');\r\n                navigate('/profile'); // Navigate to user's profile/dashboard\r\n                // Optimistically update local pickup counts for the scheduled date\r\n                const dateString = formData.date.toISOString().split('T')[0];\r\n                setDailyPickupCounts(prev => ({\r\n                    ...prev,\r\n                    [dateString]: (prev[dateString] || 0) + 1\r\n                }));\r\n            } else {\r\n                alert(`Failed to schedule pickup. Server response: ${res.data.message || 'Unknown error.'}`);\r\n            }\r\n        } catch (err) {\r\n            console.error('Error submitting pickup details:', err);\r\n            // Enhanced error message for the specific 'Data too long' issue\r\n            if (err.response && err.response.data && err.response.data.message && err.response.data.message.includes('Data too long for column \\'status\\'')) {\r\n                alert('Failed to schedule pickup: The status field (e.g., \"Paid - Pending Pickup\") might be too long for the database column. Please inform the administrator.');\r\n            } else {\r\n                 alert('Error occurred while scheduling pickup. Please try again.');\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n    // Function to handle payment initiation for non-charity users\r\n    const handlePayment = async () => {\r\n        // Basic frontend validation before proceeding to payment\r\n        if (!formData.date || !formData.time || !formData.address || !formData.pincode ||\r\n            !formData.city || !formData.state || !formData.schedulerName || !formData.phone ||\r\n            !formData.email || !formData.wasteType || !formData.image) {\r\n            alert(\"Please fill in all required fields and upload an image before proceeding to payment.\");\r\n            return;\r\n        }\r\n        if (pincodeError) {\r\n            alert(pincodeError);\r\n            return;\r\n        }\r\n\r\n        // Check daily pickup limit for the selected date\r\n        if (formData.date) {\r\n            const dateString = formData.date.toISOString().split('T')[0];\r\n            const selectedDateCount = dailyPickupCounts[dateString] || 0;\r\n            console.log(`Checking limit: Date ${dateString}, Count ${selectedDateCount}, Max ${MAX_PICKUPS_PER_DAY}`); // DEBUG\r\n            if (selectedDateCount >= MAX_PICKUPS_PER_DAY) {\r\n                alert(`Sorry, the selected date (${dateString}) has reached its maximum number of pickups (${MAX_PICKUPS_PER_DAY}). Please choose another date.`);\r\n                return;\r\n            }\r\n        }\r\n\r\n        setLoading(true);\r\n        const scriptLoaded = await loadRazorpayScript();\r\n        if (!scriptLoaded) {\r\n            alert('Razorpay SDK failed to load. Please check your internet connection.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // 1. Call backend to create Razorpay Order\r\n            // Use axios for this\r\n            const orderRes = await axios.post('http://localhost:8082/api/razorpay/create-order', {\r\n                amount: FIXED_PICKUP_PRICE_RUPEES, // Send amount in Rupees to backend\r\n            });\r\n\r\n            const orderData = orderRes.data; // Axios automatically parses JSON\r\n\r\n            // 2. Configure Razorpay checkout options\r\n            const options = {\r\n                key: RAZORPAY_KEY_ID, // Your public Razorpay Key ID\r\n                amount: orderData.amount, // Amount in PAISA from the backend response\r\n                currency: orderData.currency, // Currency from backend response\r\n                name: 'E-Waste Management',\r\n                description: 'Pickup Charge',\r\n                order_id: orderData.id, // Order ID from backend response\r\n                handler: async (response) => {\r\n                    // This function runs on successful payment\r\n                    alert('Payment successful! Payment ID: ' + response.razorpay_payment_id);\r\n                    // After successful payment, submit the pickup details to your backend\r\n                    await submitPickupDetails();\r\n                },\r\n                prefill: {\r\n                    name: formData.schedulerName,\r\n                    email: formData.email,\r\n                    contact: formData.phone,\r\n                },\r\n                theme: {\r\n                    color: '#2f855a'\r\n                },\r\n            };\r\n\r\n            const razor = new window.Razorpay(options);\r\n            razor.on('payment.failed', function (response) {\r\n                alert(\"Payment failed: \" + response.error.code + \" - \" + response.error.description);\r\n                console.error(\"Payment failed details:\", response.error);\r\n                setLoading(false);\r\n            });\r\n            razor.open(); // Open the Razorpay payment modal\r\n\r\n        } catch (err) {\r\n            console.error('Payment initiation failed:', err);\r\n            let errorMessage = 'Payment initiation failed: ';\r\n            if (err.response) {\r\n                // The request was made and the server responded with a status code\r\n                // that falls out of the range of 2xx\r\n                errorMessage += err.response.data.message || err.response.data.error || err.response.statusText;\r\n            } else if (err.request) {\r\n                // The request was made but no response was received\r\n                errorMessage += 'No response from backend. Is the backend running?';\r\n            } else {\r\n                // Something happened in setting up the request that triggered an Error\r\n                errorMessage += err.message;\r\n            }\r\n            alert(errorMessage);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Main form submission handler\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        // Perform basic validation before proceeding\r\n        if (!formData.image) {\r\n            alert(\"Please upload an image of the item.\");\r\n            return;\r\n        }\r\n        if (pincodeError) {\r\n            alert(pincodeError);\r\n            return;\r\n        }\r\n\r\n        // Check daily pickup limit on submit as well (redundant with handlePayment, but good for charity path)\r\n        if (formData.date) {\r\n            const dateString = formData.date.toISOString().split('T')[0];\r\n            const selectedDateCount = dailyPickupCounts[dateString] || 0;\r\n            if (selectedDateCount >= MAX_PICKUPS_PER_DAY) {\r\n                alert(`Sorry, the selected date (${dateString}) has reached its maximum number of pickups (${MAX_PICKUPS_PER_DAY}). Please choose another date.`);\r\n                return;\r\n            }\r\n        }\r\n\r\n        const userRole = localStorage.getItem('userRole'); // Get user role from local storage\r\n        if (userRole === 'charity') {\r\n            submitPickupDetails(); // Charity users don't pay\r\n        } else {\r\n            handlePayment(); // Regular users proceed to payment\r\n        }\r\n    };\r\n\r\n    // Helper functions for DatePicker styling\r\n    const isDateDisabled = (date) => {\r\n        const dateString = date.toISOString().split('T')[0];\r\n        const count = dailyPickupCounts[dateString] || 0;\r\n        console.log(`DatePicker: Checking ${dateString}, Count: ${count}, Disabled: ${count >= MAX_PICKUPS_PER_DAY}`); // DEBUG\r\n        return count >= MAX_PICKUPS_PER_DAY;\r\n    };\r\n\r\n    const highlightDates = (date) => {\r\n        const dateString = date.toISOString().split('T')[0];\r\n        const count = dailyPickupCounts[dateString] || 0;\r\n        console.log(`DatePicker Highlight: Checking ${dateString}, Count: ${count}, Class: ${count >= MAX_PICKUPS_PER_DAY ? 'red-date' : ''}`); // DEBUG\r\n        return count >= MAX_PICKUPS_PER_DAY ? 'red-date' : '';\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"flex bg-gray-50 min-h-screen font-sans\">\r\n            {/* Main content */}\r\n            <main className=\"flex-1 p-10\">\r\n                <div className=\"max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-xl\">\r\n                    <button onClick={() => navigate('/profile')} className=\"mb-6 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200 ease-in-out\">\r\n                         Back to Dashboard\r\n                    </button>\r\n\r\n                    <h2 className=\"text-3xl font-bold mb-8 text-green-700 text-center\">Schedule E-Waste Pickup</h2>\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                        {/* Date and Time */}\r\n                        <div className=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\">\r\n                            <div className=\"flex-1\">\r\n                                <label htmlFor=\"date\" className=\"block text-gray-700 text-sm font-medium mb-2\">Pickup Date</label>\r\n                                <DatePicker\r\n                                    selected={formData.date}\r\n                                    onChange={handleDateChange}\r\n                                    minDate={getTodayDate()}\r\n                                    dateFormat=\"yyyy-MM-dd\"\r\n                                    placeholderText=\"Select Date\"\r\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\"\r\n                                    wrapperClassName=\"w-full\"\r\n                                    required\r\n                                    filterDate={(date) => {\r\n                                        const today = getTodayDate();\r\n                                        // Only enable future dates and dates not explicitly marked as disabled by count\r\n                                        return date >= today && !isDateDisabled(date);\r\n                                    }}\r\n                                    dayClassName={highlightDates}\r\n                                />\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <label htmlFor=\"time\" className=\"block text-gray-700 text-sm font-medium mb-2\">Pickup Time</label>\r\n                                <input\r\n                                    type=\"time\"\r\n                                    id=\"time\"\r\n                                    name=\"time\"\r\n                                    value={formData.time}\r\n                                    onChange={handleChange}\r\n                                    required\r\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Full Address */}\r\n                        <div>\r\n                            <label htmlFor=\"address\" className=\"block text-gray-700 text-sm font-medium mb-2\">Full Address</label>\r\n                            <textarea\r\n                                id=\"address\"\r\n                                name=\"address\"\r\n                                value={formData.address}\r\n                                onChange={handleChange}\r\n                                placeholder=\"House No., Street, Locality\"\r\n                                required\r\n                                rows=\"3\"\r\n                                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out resize-none\"\r\n                            ></textarea>\r\n                        </div>\r\n\r\n                        {/* Pincode, City, State */}\r\n                        <div className=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\">\r\n                            <div className=\"flex-1\">\r\n                                <label htmlFor=\"pincode\" className=\"block text-gray-700 text-sm font-medium mb-2\">Pincode</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"pincode\"\r\n                                    name=\"pincode\"\r\n                                    value={formData.pincode}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"Enter 6-digit Pincode\"\r\n                                    required\r\n                                    className={`w-full p-3 border rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out ${pincodeError ? 'border-red-500' : 'border-gray-300'}`}\r\n                                    maxLength=\"6\"\r\n                                />\r\n                                {pincodeError && <p className=\"text-red-500 text-xs mt-1\">{pincodeError}</p>}\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <label htmlFor=\"city\" className=\"block text-gray-700 text-sm font-medium mb-2\">City</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"city\"\r\n                                    name=\"city\"\r\n                                    value={formData.city}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"City\"\r\n                                    required\r\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed\"\r\n                                    readOnly // City auto-filled by pincode\r\n                                />\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <label htmlFor=\"state\" className=\"block text-gray-700 text-sm font-medium mb-2\">State</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"state\"\r\n                                    name=\"state\"\r\n                                    value={formData.state}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"State\"\r\n                                    required\r\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed\"\r\n                                    readOnly // State auto-filled by pincode\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Scheduler Name & Phone */}\r\n                        <div className=\"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4\">\r\n                            <div className=\"flex-1\">\r\n                                <label htmlFor=\"schedulerName\" className=\"block text-gray-700 text-sm font-medium mb-2\">Your Name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"schedulerName\"\r\n                                    name=\"schedulerName\"\r\n                                    value={formData.schedulerName}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"Your Full Name\"\r\n                                    required\r\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <label htmlFor=\"phone\" className=\"block text-gray-700 text-sm font-medium mb-2\">Phone Number</label>\r\n                                <input\r\n                                    type=\"tel\"\r\n                                    id=\"phone\"\r\n                                    name=\"phone\"\r\n                                    value={formData.phone}\r\n                                    onChange={handleChange}\r\n                                    placeholder=\"e.g., 9876543210\"\r\n                                    required\r\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Email */}\r\n                        <div>\r\n                            <label htmlFor=\"email\" className=\"block text-gray-700 text-sm font-medium mb-2\">Email</label>\r\n                            <input\r\n                                type=\"email\"\r\n                                id=\"email\"\r\n                                name=\"email\"\r\n                                value={formData.email}\r\n                                onChange={handleChange}\r\n                                placeholder=\"you@example.com\"\r\n                                required\r\n                                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Waste Type Dropdown */}\r\n                        <div>\r\n                            <label htmlFor=\"wasteType\" className=\"block text-gray-700 text-sm font-medium mb-2\">Select E-Waste Type</label>\r\n                            <select\r\n                                id=\"wasteType\"\r\n                                name=\"wasteType\"\r\n                                value={formData.wasteType}\r\n                                onChange={handleChange}\r\n                                required\r\n                                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out\"\r\n                            >\r\n                                <option value=\"\">Select Waste Type</option>\r\n                                <option value=\"COMPUTERS\">Computers</option>\r\n                                <option value=\"LAPTOPS\">Laptops</option>\r\n                                <option value=\"MONITORS\">Monitors</option>\r\n                                <option value=\"TELEVISIONS\">Televisions</option>\r\n                                <option value=\"MOBILE_PHONES\">Mobile Phones</option>\r\n                                <option value=\"TABLETS\">Tablets</option>\r\n                                <option value=\"BATTERIES\">Batteries</option>\r\n                                <option value=\"PRINTERS\">Printers</option>\r\n                                <option value=\"FAX_MACHINES\">Fax Machines</option>\r\n                                <option value=\"SCANNERS\">Scanners</option>\r\n                                <option value=\"KEYBOARDS\">Keyboards</option>\r\n                                <option value=\"MICE\">Mice</option>\r\n                                <option value=\"CHARGERS\">Chargers</option>\r\n                                <option value=\"AUDIO_EQUIPMENT\">Audio Equipment</option>\r\n                                <option value=\"CABLES\">Cables</option>\r\n                                <option value=\"CIRCUIT_BOARDS\">Circuit Boards</option>\r\n                                <option value=\"GAME_CONSOLES\">Game Consoles</option>\r\n                                <option value=\"CAMERAS\">Cameras</option>\r\n                                <option value=\"POWER_STRIPS\">Power Strips</option>\r\n                                <option value=\"REFRIGERATORS\">Refrigerators</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Image Upload */}\r\n                        <div>\r\n                            <label htmlFor=\"imageUpload\" className=\"block text-gray-700 text-sm font-medium mb-2\">Upload Image of Item(s)</label>\r\n                            <input\r\n                                type=\"file\"\r\n                                id=\"imageUpload\"\r\n                                name=\"image\"\r\n                                accept=\"image/*\"\r\n                                ref={fileInputRef}\r\n                                onChange={handleImageChange}\r\n                                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 ease-in-out file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\r\n                                required\r\n                            />\r\n                            {imagePreview && (\r\n                                <img src={imagePreview} alt=\"Preview\" className=\"mt-4 w-48 h-48 object-cover rounded-lg shadow-md\" />\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Pickup charge info */}\r\n                        <div className=\"text-lg text-gray-700 font-semibold mt-4 text-center\">\r\n                            {localStorage.getItem('userRole') === 'charity' ? (\r\n                                <span className=\"text-green-600\">No pickup charge for charity organizations.</span>\r\n                            ) : (\r\n                                <span>Pickup Service Fee: <span className=\"text-green-700\">{FIXED_PICKUP_PRICE_RUPEES}</span> (via Razorpay)</span>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Submit Button */}\r\n                        <div className=\"mt-6\">\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                                className=\"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg\"\r\n                            >\r\n                                {loading ? 'Processing...' : 'Schedule Pickup'}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Pickup;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}