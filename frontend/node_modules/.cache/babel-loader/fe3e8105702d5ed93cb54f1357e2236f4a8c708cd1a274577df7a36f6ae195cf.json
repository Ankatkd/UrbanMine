{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ankao\\\\OneDrive\\\\Desktop\\\\nilesh\\\\E-waste\\\\frontend\\\\src\\\\pages\\\\MapsLeaflet.js\",\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css'; // Essential: Import Leaflet CSS for styling\n\n// FIX for default marker icon not showing up in some build environments (like Webpack)\n// Leaflet uses a default marker icon, and sometimes the path gets broken.\n// This ensures the icon images are correctly found.\nimport L from 'leaflet';\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  // Size of the icon\n  iconAnchor: [12, 41],\n  // Point of the icon which will correspond to marker's location\n  popupAnchor: [1, -34],\n  // Point from which the popup should open relative to the iconAnchor\n  shadowSize: [41, 41] // Size of the shadow\n});\nL.Marker.prototype.options.icon = DefaultIcon;\n// End of Leaflet marker icon fix\n\nconst MapsLeaflet = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  // Function name is MapsLeaflet as requested\n  const [places, setPlaces] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [userLocation, setUserLocation] = useState(null); // [lat, lng]\n  const mapRef = useRef(null); // Ref for MapContainer instance, for programmatic control (e.g., setView)\n\n  // This component is used to get the Leaflet map instance within the MapContainer\n  // and store it in mapRef, and to handle any global map events if needed.\n  const MapEventsHandler = () => {\n    _s();\n    const map = useMapEvents({\n      // You can add map event listeners here if needed\n      // For example, if you wanted to re-search when map moves significantly\n      // movend: () => {\n      //   const center = map.getCenter();\n      //   console.log(\"Map moved to:\", center.lat, center.lng);\n      //   // Optionally trigger a new search around the new center\n      //   // searchNearbyPlaces(center.lat, center.lng);\n      // }\n    });\n    mapRef.current = map; // Store the map instance for external control\n    return null;\n  };\n  _s(MapEventsHandler, \"D2AvXN8Rt/r3DPix6IJfcPGmgF0=\", false, function () {\n    return [useMapEvents];\n  });\n  useEffect(() => {\n    const getUserLocationAndSearch = () => {\n      // Get user's current position using browser Geolocation API\n      navigator.geolocation.getCurrentPosition(pos => {\n        const {\n          latitude,\n          longitude\n        } = pos.coords;\n        setUserLocation([latitude, longitude]); // Leaflet uses [latitude, longitude] array\n\n        // Once we have the user's location, perform the nearby search\n        searchNearbyPlaces(latitude, longitude);\n      }, err => {\n        console.error('Geolocation error:', err);\n        setLoading(false);\n        // Fallback: If geolocation fails, set a default location (Pune, India)\n        // and perform search around it.\n        const defaultLat = 18.5204; // Pune latitude\n        const defaultLng = 73.8567; // Pune longitude\n        setUserLocation([defaultLat, defaultLng]);\n        console.warn('Geolocation denied or failed. Using default location (Pune, India).');\n        searchNearbyPlaces(defaultLat, defaultLng);\n      },\n      // Geolocation options:\n      {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0\n      });\n    };\n    const searchNearbyPlaces = async (lat, lng) => {\n      setLoading(true);\n      // IMPORTANT: Replace 'YourAppName/1.0 (your-email@example.com)' with your actual app name and contact email.\n      // This is REQUIRED by Nominatim's usage policy.\n      const USER_AGENT = 'EwastePickupApp/1.0 (contact@yourdomain.com)';\n\n      // Keywords for searching e-waste related places\n      const keywords = 'e-waste recycling, electronics waste, scrap dealer, kabadiwala';\n\n      // Nominatim's 'search' API is primarily for geocoding addresses/names.\n      // To get \"nearby\" results, we can use the 'viewbox' parameter to bias results\n      // within a certain geographic area around the user's location.\n      // viewbox: south-west longitude, south-west latitude, north-east longitude, north-east latitude\n      // Here, we define a bounding box roughly 22km x 22km around the user.\n      const bboxSize = 0.1; // roughly 11km in lat/lon at equator. Adjust as needed.\n      const viewbox = `${lng - bboxSize},${lat - bboxSize},${lng + bboxSize},${lat + bboxSize}`;\n      try {\n        const response = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(keywords)}&format=json&limit=20&addressdetails=1&extratags=1&bounded=1&viewbox=${viewbox}`, {\n          headers: {\n            'User-Agent': USER_AGENT\n            // 'Accept-Language': 'en-US,en;q=0.9', // Optional: set desired language for results\n          }\n        });\n        if (!response.ok) {\n          // Handle HTTP errors (e.g., 403 Forbidden if User-Agent is missing or blocked)\n          // 429 Too Many Requests if you exceed rate limits\n          console.error(`Nominatim API error: ${response.status} - ${response.statusText}`);\n          // Provide user-friendly message for errors\n          if (response.status === 429) {\n            alert('Too many requests to map service. Please try again later.');\n          } else {\n            alert('Failed to fetch nearby centers. Please try again.');\n          }\n          throw new Error(`Nominatim API error: ${response.statusText}`);\n        }\n        const data = await response.json();\n        console.log('Nearby Nominatim results:', data); // Debug log\n\n        // Filter out results that don't have valid coordinates\n        const validPlaces = data.filter(item => item.lat && item.lon);\n        setPlaces(validPlaces);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching from Nominatim:', error);\n        setLoading(false);\n        setPlaces([]); // Clear places on error\n      }\n    };\n    getUserLocationAndSearch(); // Initiate the process on component mount\n\n    // Cleanup function (optional for this simple case, but good practice)\n    return () => {\n      // If you had listeners on the map instance directly, you'd remove them here.\n      // react-leaflet handles most cleanup for MapContainer components.\n    };\n  }, []); // Empty dependency array ensures useEffect runs only once on mount\n\n  // Render loading state or map content\n  if (loading && !userLocation) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        fontSize: '1.2rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83D\\uDDFA\\uFE0F Loading map and your location... Please grant location access.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: '100vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '30%',\n        padding: '1rem',\n        overflowY: 'auto',\n        backgroundColor: '#f9f9f9',\n        borderRight: '1px solid #ddd',\n        boxSizing: 'border-box' // Include padding in width\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Nearby E-Waste Centers (Powered by OpenStreetMap)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), loading && places.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83D\\uDD0D Searching for nearby centers...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this) : places.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83D\\uDE14 No nearby centers found based on keywords. Try different terms or broaden the search area.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this) : places.map((place, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '10px',\n          padding: '10px',\n          backgroundColor: '#fff',\n          borderRadius: '6px',\n          boxShadow: '0 0 5px rgba(0,0,0,0.1)',\n          cursor: 'pointer',\n          // Indicate that this div is clickable\n          transition: 'transform 0.2s ease-in-out' // Smooth hover effect\n        }\n        // On click, pan the map to the selected place\n        ,\n        onClick: () => {\n          if (mapRef.current) {\n            // setView takes [lat, lng] and zoom level\n            mapRef.current.setView([parseFloat(place.lat), parseFloat(place.lon)], 16);\n          }\n        }\n        // Optional: Add hover effects for better UX\n        ,\n        onMouseEnter: e => e.currentTarget.style.transform = 'translateY(-2px)',\n        onMouseLeave: e => e.currentTarget.style.transform = 'translateY(0)',\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: place.name || place.display_name.split(',')[0] || 'Unknown Place'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: place.display_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 15\n        }, this), place.address && place.address.road && place.address.city && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Address: \", place.address.road, \", \", place.address.city]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 17\n        }, this), place.type && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Type: \", place.type]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 30\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '70%'\n      },\n      children: userLocation ? /*#__PURE__*/_jsxDEV(MapContainer, {\n        center: userLocation // Map centers on user's current or default location\n        ,\n        zoom: 14,\n        scrollWheelZoom: true // Enable zooming with mouse scroll\n        ,\n        style: {\n          height: '100%',\n          width: '100%'\n        },\n        whenCreated: map => mapRef.current = map // Store the map instance\n        ,\n        children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n          attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n          url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Marker, {\n          position: userLocation,\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: \"Your Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this), places.map((place, idx) => /*#__PURE__*/_jsxDEV(Marker, {\n          position: [parseFloat(place.lat), parseFloat(place.lon)],\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: place.name || place.display_name.split(',')[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 84\n            }, this), place.display_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 17\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(MapEventsHandler, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      // Display a message while waiting for geolocation or if it fails\n      _jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '100%',\n          border: '1px solid #ccc',\n          background: '#e0e0e0'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\uD83C\\uDF0D Initializing map... Please enable location services in your browser.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n};\n_s2(MapsLeaflet, \"XBGChXNo6W58kCUDr+YTbvMnQLY=\");\n_c = MapsLeaflet;\nexport default MapsLeaflet; // Export with the original function name\nvar _c;\n$RefreshReg$(_c, \"MapsLeaflet\");","map":{"version":3,"names":["React","useEffect","useRef","useState","MapContainer","TileLayer","Marker","Popup","useMapEvents","L","icon","iconShadow","jsxDEV","_jsxDEV","DefaultIcon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","prototype","options","MapsLeaflet","_s2","_s","$RefreshSig$","places","setPlaces","loading","setLoading","userLocation","setUserLocation","mapRef","MapEventsHandler","map","current","getUserLocationAndSearch","navigator","geolocation","getCurrentPosition","pos","latitude","longitude","coords","searchNearbyPlaces","err","console","error","defaultLat","defaultLng","warn","enableHighAccuracy","timeout","maximumAge","lat","lng","USER_AGENT","keywords","bboxSize","viewbox","response","fetch","encodeURIComponent","headers","ok","status","statusText","alert","Error","data","json","log","validPlaces","filter","item","lon","style","display","justifyContent","alignItems","height","fontSize","children","fileName","_jsxFileName","lineNumber","columnNumber","width","padding","overflowY","backgroundColor","borderRight","boxSizing","length","place","idx","marginBottom","borderRadius","boxShadow","cursor","transition","onClick","setView","parseFloat","onMouseEnter","e","currentTarget","transform","onMouseLeave","name","display_name","split","address","road","city","type","center","zoom","scrollWheelZoom","whenCreated","attribution","url","position","border","background","_c","$RefreshReg$"],"sources":["C:/Users/ankao/OneDrive/Desktop/nilesh/E-waste/frontend/src/pages/MapsLeaflet.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css'; // Essential: Import Leaflet CSS for styling\r\n\r\n// FIX for default marker icon not showing up in some build environments (like Webpack)\r\n// Leaflet uses a default marker icon, and sometimes the path gets broken.\r\n// This ensures the icon images are correctly found.\r\nimport L from 'leaflet';\r\nimport icon from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl: icon,\r\n    shadowUrl: iconShadow,\r\n    iconSize: [25, 41],    // Size of the icon\r\n    iconAnchor: [12, 41],  // Point of the icon which will correspond to marker's location\r\n    popupAnchor: [1, -34], // Point from which the popup should open relative to the iconAnchor\r\n    shadowSize: [41, 41]   // Size of the shadow\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n// End of Leaflet marker icon fix\r\n\r\nconst MapsLeaflet = () => { // Function name is MapsLeaflet as requested\r\n  const [places, setPlaces] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [userLocation, setUserLocation] = useState(null); // [lat, lng]\r\n  const mapRef = useRef(null); // Ref for MapContainer instance, for programmatic control (e.g., setView)\r\n\r\n  // This component is used to get the Leaflet map instance within the MapContainer\r\n  // and store it in mapRef, and to handle any global map events if needed.\r\n  const MapEventsHandler = () => {\r\n    const map = useMapEvents({\r\n      // You can add map event listeners here if needed\r\n      // For example, if you wanted to re-search when map moves significantly\r\n      // movend: () => {\r\n      //   const center = map.getCenter();\r\n      //   console.log(\"Map moved to:\", center.lat, center.lng);\r\n      //   // Optionally trigger a new search around the new center\r\n      //   // searchNearbyPlaces(center.lat, center.lng);\r\n      // }\r\n    });\r\n    mapRef.current = map; // Store the map instance for external control\r\n    return null;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getUserLocationAndSearch = () => {\r\n      // Get user's current position using browser Geolocation API\r\n      navigator.geolocation.getCurrentPosition(\r\n        (pos) => {\r\n          const { latitude, longitude } = pos.coords;\r\n          setUserLocation([latitude, longitude]); // Leaflet uses [latitude, longitude] array\r\n\r\n          // Once we have the user's location, perform the nearby search\r\n          searchNearbyPlaces(latitude, longitude);\r\n        },\r\n        (err) => {\r\n          console.error('Geolocation error:', err);\r\n          setLoading(false);\r\n          // Fallback: If geolocation fails, set a default location (Pune, India)\r\n          // and perform search around it.\r\n          const defaultLat = 18.5204; // Pune latitude\r\n          const defaultLng = 73.8567; // Pune longitude\r\n          setUserLocation([defaultLat, defaultLng]);\r\n          console.warn('Geolocation denied or failed. Using default location (Pune, India).');\r\n          searchNearbyPlaces(defaultLat, defaultLng);\r\n        },\r\n        // Geolocation options:\r\n        { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }\r\n      );\r\n    };\r\n\r\n    const searchNearbyPlaces = async (lat, lng) => {\r\n      setLoading(true);\r\n      // IMPORTANT: Replace 'YourAppName/1.0 (your-email@example.com)' with your actual app name and contact email.\r\n      // This is REQUIRED by Nominatim's usage policy.\r\n      const USER_AGENT = 'EwastePickupApp/1.0 (contact@yourdomain.com)'; \r\n      \r\n      // Keywords for searching e-waste related places\r\n      const keywords = 'e-waste recycling, electronics waste, scrap dealer, kabadiwala';\r\n\r\n      // Nominatim's 'search' API is primarily for geocoding addresses/names.\r\n      // To get \"nearby\" results, we can use the 'viewbox' parameter to bias results\r\n      // within a certain geographic area around the user's location.\r\n      // viewbox: south-west longitude, south-west latitude, north-east longitude, north-east latitude\r\n      // Here, we define a bounding box roughly 22km x 22km around the user.\r\n      const bboxSize = 0.1; // roughly 11km in lat/lon at equator. Adjust as needed.\r\n      const viewbox = `${lng - bboxSize},${lat - bboxSize},${lng + bboxSize},${lat + bboxSize}`;\r\n\r\n      try {\r\n        const response = await fetch(\r\n          `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(keywords)}&format=json&limit=20&addressdetails=1&extratags=1&bounded=1&viewbox=${viewbox}`,\r\n          {\r\n            headers: {\r\n              'User-Agent': USER_AGENT,\r\n              // 'Accept-Language': 'en-US,en;q=0.9', // Optional: set desired language for results\r\n            },\r\n          }\r\n        );\r\n\r\n        if (!response.ok) {\r\n          // Handle HTTP errors (e.g., 403 Forbidden if User-Agent is missing or blocked)\r\n          // 429 Too Many Requests if you exceed rate limits\r\n          console.error(`Nominatim API error: ${response.status} - ${response.statusText}`);\r\n          // Provide user-friendly message for errors\r\n          if (response.status === 429) {\r\n            alert('Too many requests to map service. Please try again later.');\r\n          } else {\r\n            alert('Failed to fetch nearby centers. Please try again.');\r\n          }\r\n          throw new Error(`Nominatim API error: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log('Nearby Nominatim results:', data); // Debug log\r\n\r\n        // Filter out results that don't have valid coordinates\r\n        const validPlaces = data.filter(item => item.lat && item.lon);\r\n\r\n        setPlaces(validPlaces);\r\n        setLoading(false);\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching from Nominatim:', error);\r\n        setLoading(false);\r\n        setPlaces([]); // Clear places on error\r\n      }\r\n    };\r\n\r\n    getUserLocationAndSearch(); // Initiate the process on component mount\r\n\r\n    // Cleanup function (optional for this simple case, but good practice)\r\n    return () => {\r\n      // If you had listeners on the map instance directly, you'd remove them here.\r\n      // react-leaflet handles most cleanup for MapContainer components.\r\n    };\r\n  }, []); // Empty dependency array ensures useEffect runs only once on mount\r\n\r\n  // Render loading state or map content\r\n  if (loading && !userLocation) {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh', fontSize: '1.2rem' }}>\r\n        <p>üó∫Ô∏è Loading map and your location... Please grant location access.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ display: 'flex', height: '100vh' }}>\r\n      {/* Sidebar for displaying nearby places */}\r\n      <div\r\n        style={{\r\n          width: '30%',\r\n          padding: '1rem',\r\n          overflowY: 'auto',\r\n          backgroundColor: '#f9f9f9',\r\n          borderRight: '1px solid #ddd',\r\n          boxSizing: 'border-box', // Include padding in width\r\n        }}\r\n      >\r\n        <h2>Nearby E-Waste Centers (Powered by OpenStreetMap)</h2>\r\n        {loading && places.length === 0 ? (\r\n          <p>üîç Searching for nearby centers...</p>\r\n        ) : places.length === 0 ? (\r\n          <p>üòî No nearby centers found based on keywords. Try different terms or broaden the search area.</p>\r\n        ) : (\r\n          places.map((place, idx) => (\r\n            <div\r\n              key={idx}\r\n              style={{\r\n                marginBottom: '10px',\r\n                padding: '10px',\r\n                backgroundColor: '#fff',\r\n                borderRadius: '6px',\r\n                boxShadow: '0 0 5px rgba(0,0,0,0.1)',\r\n                cursor: 'pointer', // Indicate that this div is clickable\r\n                transition: 'transform 0.2s ease-in-out', // Smooth hover effect\r\n              }}\r\n              // On click, pan the map to the selected place\r\n              onClick={() => {\r\n                if (mapRef.current) {\r\n                  // setView takes [lat, lng] and zoom level\r\n                  mapRef.current.setView([parseFloat(place.lat), parseFloat(place.lon)], 16);\r\n                }\r\n              }}\r\n              // Optional: Add hover effects for better UX\r\n              onMouseEnter={(e) => e.currentTarget.style.transform = 'translateY(-2px)'}\r\n              onMouseLeave={(e) => e.currentTarget.style.transform = 'translateY(0)'}\r\n            >\r\n              {/* Display Nominatim place data */}\r\n              {/* 'name' is often a more concise name, 'display_name' is full address string */}\r\n              <h4>{place.name || place.display_name.split(',')[0] || 'Unknown Place'}</h4> \r\n              <p>{place.display_name}</p>\r\n              {/* Check if address details exist before trying to access properties */}\r\n              {place.address && place.address.road && place.address.city && (\r\n                <p>Address: {place.address.road}, {place.address.city}</p>\r\n              )}\r\n              {place.type && <p>Type: {place.type}</p>}\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {/* Map Display Area */}\r\n      <div style={{ width: '70%' }}>\r\n        {userLocation ? (\r\n          <MapContainer\r\n            center={userLocation} // Map centers on user's current or default location\r\n            zoom={14}\r\n            scrollWheelZoom={true} // Enable zooming with mouse scroll\r\n            style={{ height: '100%', width: '100%' }}\r\n            whenCreated={map => (mapRef.current = map)} // Store the map instance\r\n          >\r\n            {/* OpenStreetMap Tile Layer */}\r\n            <TileLayer\r\n              attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            />\r\n            \r\n            {/* Marker for user's current location */}\r\n            <Marker position={userLocation}>\r\n              <Popup>Your Location</Popup>\r\n            </Marker>\r\n\r\n            {/* Markers for the found e-waste places */}\r\n            {places.map((place, idx) => (\r\n              <Marker key={idx} position={[parseFloat(place.lat), parseFloat(place.lon)]}>\r\n                <Popup>\r\n                  <strong>{place.name || place.display_name.split(',')[0]}</strong><br/>\r\n                  {place.display_name}\r\n                </Popup>\r\n              </Marker>\r\n            ))}\r\n            \r\n            <MapEventsHandler /> {/* Component to attach map events */}\r\n          </MapContainer>\r\n        ) : (\r\n          // Display a message while waiting for geolocation or if it fails\r\n          <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%', border: '1px solid #ccc', background: '#e0e0e0' }}>\r\n            <p>üåç Initializing map... Please enable location services in your browser.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapsLeaflet; // Export with the original function name"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}